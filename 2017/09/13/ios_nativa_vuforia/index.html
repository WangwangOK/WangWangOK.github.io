<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> iOSä¸­Nativeçš„æ–¹å¼é›†æˆVuforiaã€å…¶æºç è§£è¯»ä»¥åŠè‡ªå®šä¹‰æ¨¡å‹ Â· å‡Œäº‘å£®å¿—å¹¾å¤šæ„</title><meta name="description" content="iOSä¸­Nativeçš„æ–¹å¼é›†æˆVuforiaã€å…¶æºç è§£è¯»ä»¥åŠè‡ªå®šä¹‰æ¨¡å‹ - ç‹æœ›"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/uploads/avatar/heart.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://yoursite.com/atom.xml" title="å‡Œäº‘å£®å¿—å¹¾å¤šæ„"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/uploads/avatar/pencil.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/wwloading" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/wangwangok" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="https://www.gitbook.com/@wangwangok" target="_blank" class="nav-list-link">GITBOOK</a></li><li class="nav-list-item"><a href="http://www.jianshu.com/u/11188e5bb304" target="_blank" class="nav-list-link">JIANSHU</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">iOSä¸­Nativeçš„æ–¹å¼é›†æˆVuforiaã€å…¶æºç è§£è¯»ä»¥åŠè‡ªå®šä¹‰æ¨¡å‹</h1><div class="post-info">Sep 13, 2017</div><div class="post-content"><p><img src="http://upload-images.jianshu.io/upload_images/619906-e5bbef9f60e5ee49.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/240" alt=""><br>â€ƒâ€ƒéšç€å‰æœ‰Appleåœ¨iOS11ä¸­æä¾›äº†ARKitï¼Œåæœ‰Googleæ¨å‡ºçš„ARCoreï¼Œæ˜¾ç„¶æ€èµ·äº†ä¸€è‚¡ARçƒ­æ½®ï¼ˆéƒ½æ˜¯ä¸€å †åºŸè¯ï¼Œè¯´ç™½äº†å°±æ˜¯å…¬å¸è¦æ±‚åšï¼‰ã€‚<br>â€ƒâ€ƒ<a id="more"></a><br>â€ƒâ€ƒç”±äºVuforiaå·²ç»å­˜åœ¨è¾ƒé•¿æ—¶é—´äº†ï¼Œç›¸å¯¹äºEasyARæˆ–è€…ç™¾åº¦ARæ›´ä¸ºæˆç†Ÿä¸€ç‚¹å„¿ï¼Œæ‰€ä»¥å®ƒæˆäº†ç¬¬ä¸€ä¸ªæŠ€æœ¯é€‰æ‹©ã€‚EasyARå’Œç™¾åº¦çš„ARâ€”â€”DuMix ARåé¢å†ä¾æ¬¡å»å­¦ä¹ ã€‚å¥½å§ï¼Œå…ˆå¼€å§‹æ¥å­¦ä¹ Vuforiaå§ï¼<br>è¯¥æ–‡ç« åŒæ­¥å‘å¸ƒåœ¨<a href="https://wangwangok.github.io" target="_blank" rel="external">æˆ‘çš„åšå®¢</a>.</p>
<h2 id="é›†æˆæ­¥éª¤"><a href="#é›†æˆæ­¥éª¤" class="headerlink" title="é›†æˆæ­¥éª¤"></a>é›†æˆæ­¥éª¤</h2><p>ç”±äºè¿™äº›æ­¥éª¤ç›¸å¯¹æ¥è¯´æ¯”è¾ƒåŸºç¡€ï¼Œæˆ‘å°±ç›´æ¥ç½—åˆ—å‡ºæ¥ã€‚</p>
<ul>
<li><p>1ã€å¼€å‘è€…å®˜ç½‘<a href="https://developer.vuforia.comï¼›" target="_blank" rel="external">https://developer.vuforia.comï¼›</a></p>
</li>
<li><p>2ã€ä¸‹è½½ios-sdkå’Œios-sampleï¼Œå¹¶æŒ‰ç…§å®˜æ–¹æ–‡æ¡£è¦æ±‚å°†ios-sampleæ”¾å…¥åˆ°ios-sdkçš„sampleæ–‡ä»¶å¤¹ä¸‹</p>
</li>
<li><p>3ã€åœ¨vuforiaçš„å¼€å‘è€…å®˜ç½‘ä¸Šçš„License Managerå’ŒTarget Managerï¼Œæ·»åŠ License-keyå’Œdatabase<br><img src="http://upload-images.jianshu.io/upload_images/619906-8b73f5d04a424fe9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="License-Key"></p>
</li>
<li><p>4ã€å°†ä¸Šä¸€æ­¥æ·»åŠ çš„License-keyï¼Œæ”¾åœ¨ios-sampleä¸­çš„ä»£ç æ–‡ä»¶<strong>SampleApplicationSession.mm</strong>ä¸­çš„æ–¹æ³•<code>Vuforia::setInitParameters(mVuforiaInitFlags,&quot;&quot;);</code>ä¸­ã€‚å…·ä½“æ­¥éª¤è§<a href="https://library.vuforia.com/articles/Solution/How-To-add-a-License-Key-to-your-Vuforia-App" target="_blank" rel="external">å®˜ç½‘</a>ã€‚</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">Vuforia::setInitParameters(mVuforiaInitFlags,&quot;AT16FIX/////AAAAGVieZ/kg1UkghTnYAz5zXWs8+y5JjeF/NJRcjgVDoCSvsrSt+lWzFMcIVBbQ2YSFRF+6J0GceHoaz8NctXib3cndJEacXmR+1FyO5FhalO7sC4hE9d1/x72qTNDhkPs4rF04JulMYT876Grsnmg9C61oyaDVwBfSpzNZ7gx3NADkkV5q4NQs4ghZwVCdMhj6LVt1YTJcwiuULtDTEgpFZZeW/nC8yiC53hpUFOVxhH++ILx1T65jpY8yDn6ct++3mgVeVotg/5tWXYb5FYqBtJiwU/LJJxhJYqUWyy4pd9dHUJBQojuAE8FoW1DmjokrpDWgjOMMp3am4GjNT04hCg+o0Z3SByYx6VIqfSR9fsXw&quot;);</div><div class="line">``` </div><div class="line"></div><div class="line">- 5ã€å°†ç¬¬3æ­¥ä¸­Target Manageråˆ›å»ºçš„databaseï¼Œä¼ å…¥ç›¸å…³çš„å›¾ç‰‡æ–‡ä»¶ã€‚ä¹Ÿå¯ä»¥ä¸ä¼ ï¼Œè¿™æ­¥å¯é€‰ï¼›[æ€æ ·ä½¿ç”¨è®¾å¤‡æ•°æ®](https://library.vuforia.com/articles/Solution/How-To-Work-with-Device-Databases.html)ã€‚æˆ‘ä»¬åœ¨[å®˜æ–¹Developer](https://developer.vuforia.com/targetmanager/project/checkDeviceProjectsCreated?dataRequestedForUserId=)åˆ›å»ºï¼Œä¸‹è½½å¯¹åº”çš„Databaseï¼Œåœ¨æ·»åŠ å›¾ç‰‡æ—¶ï¼Œå¯¹åº”çš„æ˜Ÿæ˜Ÿæ•°è¶Šé«˜è¡¨æ˜è¯†åˆ«åº¦è¶Šé«˜</div><div class="line">![Target-Manager](http://upload-images.jianshu.io/upload_images/619906-9a71472177725481.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/540)</div><div class="line">è§£å‹å¹¶å°†å…¶å¼•å…¥åˆ°å·¥ç¨‹ä¸­ï¼š</div><div class="line">![å¼•å…¥å·¥ç¨‹](http://upload-images.jianshu.io/upload_images/619906-d8ea91265da85cc3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)</div><div class="line">è¿™ä¸€æ­¥å¯ä»¥ä¸åšï¼Œå› ä¸ºè¿™åªæ˜¯åœ¨ç»™åé¢æ‰“åŸºç¡€è€Œå·²ï¼Œå¦‚æœåªæ˜¯è¿è¡Œdemoçš„è¯æ˜¯ä¸éœ€è¦åšè¿™ä¸€æ­¥çš„ã€‚å¦‚æœåšäº†è¿™ä¸€æ­¥ï¼Œåœ¨æ‰«æä½ å¯¹åº”çš„å›¾ç‰‡çš„æ—¶å€™æ˜¯æ²¡æœ‰ä»»ä½•æ•ˆæœçš„ï¼Œå…·ä½“çš„æ“ä½œåé¢ã€‚</div><div class="line"></div><div class="line">- 6ã€ç¼–è¯‘è¿è¡Œï¼Œç”±äºéœ€è¦ä½¿ç”¨åˆ°ä¼ æ„Ÿå™¨ï¼Œæ‰€ä»¥å¿…é¡»ä½¿ç”¨çœŸæœºæ¥è¿è¡Œã€‚å…³äºçœŸæœºè¿è¡Œçš„ç›¸å…³äº‹é¡¹æŸ¥çœ‹apple developer</div><div class="line"></div><div class="line">## æºç é˜…è¯»é¡ºåº</div><div class="line">&gt; æºç è¯´æ˜ï¼š</div><div class="line">&gt; Voforia SDKç‰ˆæœ¬ï¼š``vuforia-sdk-ios-6-5-19``</div><div class="line">&gt; iOS Samplesç‰ˆæœ¬ï¼š``vuforia-samples-core-ios-6-5-20``</div><div class="line"></div><div class="line">&gt; å¦‚æœä¸æƒ³çœ‹æºç ç›¸å…³å¯ç›´æ¥è·³è¿‡è¿™éƒ¨åˆ†ï¼Œç›´æ¥è·Ÿç€â€œæ”¶å°¾â€åšè‡ªå®šä¹‰çš„trackerå’Œæ¨¡å‹ï¼ˆæ›¿æ¢TeapotèŒ¶å£¶æ¨¡å‹ä¸ºè‡ªå·±çš„ï¼‰</div><div class="line"></div><div class="line">ä¸ºä½•è¦é˜…è¯»æºç ï¼Ÿå› ä¸ºåœ¨__Voforia__çš„å®˜æ–¹æ–‡æ¡£ä¸­æˆ‘æ²¡æœ‰æ‰¾åˆ°æˆ‘è‡ªå·±æƒ³è¦çš„ä¿¡æ¯ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦é€šè¿‡é˜…è¯»æºç ï¼Œæ¥æ‰¾åˆ°æ€æ ·æ‰èƒ½å»ä¿®æ”¹è´´åœ¨ç›®æ ‡å›¾åƒä¸­è™šæ‹Ÿæ¨¡å‹ã€‚ä»¥sampleä¸­``ImageTargetsViewController``ä¸ºä¾‹æ¥è§£è¯»ï¼</div><div class="line">é¦–å…ˆæŸ¥çœ‹``ImageTargetsViewController.h``æ–‡ä»¶ï¼Œæˆ‘ä»¬å…ˆä¸çœ‹æˆå‘˜å˜é‡ã€‚å…ˆæ¥çœ‹å±æ€§</div><div class="line"></div><div class="line">|å±æ€§|å±æ€§ç±»å‹|åˆæ­¥ä½œç”¨|</div><div class="line">|:---|:---|:---|</div><div class="line">|__eaglView__|``ImageTargetsEAGLView*``|åˆæ­¥è®¤å®šä¸ºä¸€ä¸ªå±•ç¤ºè§†å›¾|</div><div class="line">|__tapGestureRecognizer__|``UITapGestureRecognizer*``|ä¸€ä¸ªç‚¹å‡»æ‰‹åŠ¿|</div><div class="line">|__vapp__|``SampleApplicationSession*``|åˆæ­¥è®¤å®šä¸ºä¸€ä¸ªä¼šè¯å±‚ï¼ˆç±»ä¼¼äºISOç½‘ç»œä¸ƒå±‚æ¨¡å‹ä¸­ï¼Œåœ¨TCPå¯ä»¥å½’äºåº”ç”¨å±‚ï¼Œä¹Ÿå°±æ˜¯è¯´æƒ³å·æ‡’å¯ä»¥ç›´æ¥å°†å…¶ä»£ç æ”¾å…¥æ§åˆ¶å™¨ä¸­ã€‚ä¸ªäººç†è§£ï¼‰|</div><div class="line">|__showingMenu__|``BOOL``|ä¸€ä¸ªflag|</div><div class="line"></div><div class="line">ä»ä¸Šè¡¨ä¸­å‡ºç°çš„å±æ€§ï¼Œæˆ‘ä»¬å…ˆæ¥åˆ†æä¸€ä¸‹å±æ€§``eaglView ``å’Œ``vapp ``ã€‚</div><div class="line"></div><div class="line">#### SampleApplicationSessionç±»</div><div class="line">åœ¨``ImageTargetsViewController``æ§åˆ¶å™¨ç±»ä¸­ï¼Œå’Œä¸‹é¢ä¼šè®²åˆ°çš„``ImageTargetsEAGLView ``éƒ½æœ‰``SampleApplicationSession ``ç±»å‹çš„å±æ€§ï¼Œæ‰€ä»¥æˆ‘ä»¬æœ‰å¿…è¦å…ˆæ¥çœ‹çœ‹è¯¥ç±»ã€‚åŒæ ·çš„å…ˆçœ‹å¤´æ–‡ä»¶ï¼Œå› ä¸ºå¤´æ–‡ä»¶èƒ½å¤Ÿè®©æˆ‘ä»¬å¯¹äºè¯¥ç±»æœ‰å¤§ä½“çš„è®¤è¯†ï¼Œè€Œä¸æ‹˜äºç±»å…·ä½“çš„å®ç°ç»†èŠ‚ã€‚</div><div class="line">â€ƒâ€ƒç²—ç•¥æ¥çœ‹ï¼Œæä¾›äº†ä¸€ä¸ªåˆå§‹åŒ–æ–¹æ³•ï¼›ä¸€ä¸ªåˆå§‹åŒ–ARçš„æ–¹æ³•ï¼›å››ä¸ªå¯¹ARçš„æ“ä½œæ–¹æ³•ï¼ˆå®ƒä»¬ä¸æ˜¯æˆ‘ä»¬éœ€è¦çš„é‡ç‚¹ï¼Œç­‰åˆ°éœ€è¦çš„æ—¶å€™å†æ¥ä»”ç»†é˜…è¯»ï¼‰ï¼›ä»¥åŠä¸€ä¸ªå¯¹Cameraçš„æ–¹æ³•ï¼š</div></pre></td></tr></table></figure>
</li>
<li><p>(id)initWithDelegate:(id<sampleapplicationcontrol>) delegate;</sampleapplicationcontrol></p>
</li>
<li>(void) initAR:(int) VuforiaInitFlags orientation:(UIInterfaceOrientation) ARViewOrientation;</li>
<li>(bool) startAR:(Vuforia::CameraDevice::CAMERA_DIRECTION) camera error:(NSError **)error;</li>
<li>(bool) pauseAR:(NSError **)error;</li>
<li>(bool) resumeAR:(NSError **)error;</li>
<li>(bool) stopAR:(NSError **)error;</li>
<li>(bool) stopCamera:(NSError **)error;<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ä¸Šè¿°çš„initARæ–¹æ³•æ˜¯é€šè¿‡å¼‚æ­¥å®ç°çš„ï¼Œå½“å…¶ARåˆå§‹åŒ–å®Œæˆä¹‹åä¼šè°ƒç”¨æ–¹æ³•ä¸‹é¢ä¼šæåˆ°çš„ä»£ç†æ–¹æ³•``onInitARDone ``ã€‚é¡ºè—¤æ‘¸ç“œï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹è¯¥ä»£ç†ï¼Œé‚£ä¹ˆè¯¥ä»£ç†æ‰€éœ€è¦å¤„ç†çš„äº‹åŠ¡æœ‰å“ªäº›å‘¢ï¼Ÿè¿™é‡Œå…ˆå°†``SampleApplicationControl``çš„æ‰€æœ‰æ–¹æ³•å…ˆåˆ—å‡ºæ¥ï¼š</div></pre></td></tr></table></figure>
</li>
</ul>
<p>@required</p>
<ul>
<li>(void) onInitARDone:(NSError *)error;</li>
<li>(bool) doInitTrackers;</li>
<li>(bool) doLoadTrackersData;</li>
<li>(bool) doStartTrackers;</li>
<li>(bool) doStopTrackers;</li>
<li>(bool) doUnloadTrackersData;</li>
<li>(bool) doDeinitTrackers;</li>
<li>(void)configureVideoBackgroundWithViewWidth:(float)viewWidth andHeight:(float)viewHeight;</li>
</ul>
<p>@optional</p>
<ul>
<li><p>(void) onVuforiaUpdate: (Vuforia::State *) state;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">è¯¥ä»£ç†æ–¹æ³•ä¸­å¤§å¤šæ˜¯æ¶‰åŠåˆ°çš„æ˜¯trackerã€‚é€šè¿‡ä»åˆå§‹åŒ–æ–¹æ³•å¼€å§‹æŸ¥çœ‹æ–¹æ³•è°ƒç”¨ï¼Œå¾—å‡ºäº†ä¸€ä¸ªç¨‹åºæ‰§è¡Œæµç¨‹å›¾ï¼Œ</div><div class="line">![å›¾-1](http://upload-images.jianshu.io/upload_images/619906-ae15fadf72afc1f8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)</div><div class="line">æˆ‘ä»¬ä¸»åŠ¨è°ƒç”¨``initAR``æ–¹æ³•ï¼Œå…¶ç»“æœä¼šç”±å›è°ƒæ–¹æ³•``onInitARDone``ååº”ç»™å¼€å‘è€…ã€‚å¼€å‘è€…å¯ä»¥ç”¨é€šè¿‡è°ƒç”¨``doInitTrackers``æ¥æ§åˆ¶æ˜¯å¦éœ€è¦å»åŠ è½½trackeræ•°æ®ï¼Œå¦‚æœå¯ä»¥åŠ è½½æ•°æ®åˆ™é€šè¿‡è°ƒç”¨å›è°ƒæ–¹æ³•``doLoadTrackersData``æ¥è·å–æ•°æ®ã€‚å…³äºè¯¥ç±»ä¸­å…¶ä»–å‡ ä¸ªæ–¹æ³•``startAR , pauseAR, resumeAR, stopAR``ç”±è°ƒç”¨äººå‘˜ä¸»åŠ¨è°ƒç”¨ï¼Œè°ƒç”¨è¿™äº›æ–¹æ³•ä¼šè§¦å‘å¯¹åº”çš„æ–¹æ³•å›è°ƒã€‚</div><div class="line">ç°åœ¨æˆ‘ä»¬éœ€è¦æŠŠç›®å…‰è½¬å‘``ImageTargetsEAGLView ``ç±»ï¼Œå¹¶å»å…·ä½“çš„çœ‹ä¸€ä¸‹é‡Œé¢çš„ç›¸å…³ç»†èŠ‚ã€‚</div><div class="line"></div><div class="line">#### SampleAppRendererç±»</div><div class="line">è¿™ä¸ªç±»ä¸»è¦æ˜¯åšæ¸²æŸ“ç›¸å…³çš„å·¥ä½œï¼Œå…¶æºç å¤§å¤šæ•°ä¸ºOpenGLã€‚æ‰€ä»¥å¯¹äºè¯¥ç±»æˆ‘åªåšå…·ä½“çš„ä½œç”¨åˆ†æï¼Œè€Œä¸å»è§£é‡Šå…·ä½“çš„æºä»£ç ï¼ˆå› ä¸ºæˆ‘ä¹Ÿä¸æ‡‚ï¼‰ï¼Œå¦‚æœ‰éœ€è¦çš„è¯ï¼Œè‡ªè¡Œæ·±ç©¶å§ï¼Œå“ˆå“ˆå“ˆğŸ˜„ã€‚è¿™é‡Œå…ˆå°†å„ä¸ªæ–¹æ³•çš„ä½œç”¨ç½—åˆ—å‡ºæ¥ï¼š</div><div class="line"></div><div class="line">|æ–¹æ³•å|æ–¹æ³•ä½œç”¨|</div><div class="line">|:---|:---|</div><div class="line">|initWithSampleAppRendererControl|ç±»åˆå§‹åŒ–æ–¹æ³•|</div><div class="line">|initRendering|æ¸²æŸ“ç›¸å…³çš„åˆå§‹åŒ–|</div><div class="line">|setNearPlane:farPlane:|é…ç½®æŠ•å½±çŸ©é˜µæ•°æ®|</div><div class="line">|renderFrameVuforia|ç”±Vuforiaè°ƒç”¨ï¼Œæ¸²æŸ“æ•°æ®å¸§åˆ°å±å¹•|</div><div class="line">|renderVideoBackground|åå°æ¸²æŸ“è§†é¢‘|</div><div class="line">|configureVideoBackgroundWithViewWidth:andHeight:|è§†é¢‘ç›¸å…³çš„é…ç½®|</div><div class="line">|updateRenderingPrimitives|æ›´æ–°æ¸²æŸ“æ•°æ®|</div><div class="line">ä¸‹é¢å…·ä½“åˆ†æï¼šè€è§„çŸ©ï¼ŒåŒæ ·å…ˆçœ‹å¤´æ–‡ä»¶ï¼Œæˆ‘ä»¬æ ¹æ®å¤´æ–‡ä»¶æš´éœ²å‡ºæ¥çš„æ–¹æ³•ä¸€å±‚ä¸€å±‚å¾€é‡Œå‰¥ã€‚è¯¥ç±»å­˜åœ¨ä¸€ä¸ªåè®®``SampleAppRendererControl``ï¼Œå’Œä¸€ä¸ªåˆå§‹åŒ–æ–¹æ³•``initWithSampleAppRendererControl``ã€‚ä½¿ç”¨è¿™ä¸ªæ–¹æ³•éœ€è¦ä¼ å…¥ä¸€ä¸ªéµå®ˆ``SampleAppRendererControl``åè®®çš„ç±»å®ä¾‹ï¼Œç¬¬äºŒä¸ªå‚æ•°æ¥å†³å®š__VR/AR__çš„æ¨¡å¼ï¼Œä»¥åŠä¸‰ä¸ªç”¨äºå†³å®šæŠ•å½±çŸ©é˜µçš„å‚æ•°ã€‚é™¤äº†åœ¨åˆå§‹åŒ–æ–¹æ³•è®¾ç½®æŠ•å½±çŸ©é˜µçš„å‚æ•°ï¼Œè¯¥ç±»æä¾›äº†ä¸€ä¸ªpublicæ–¹æ³•``setNearPlane:farPlane:``ã€‚è¿›å…¥åˆ°.mmæ–‡ä»¶ä¸­æŸ¥çœ‹è¯¥åˆå§‹åŒ–æ–¹æ³•å¯ä»¥çœ‹å‡ºï¼Œåªæ˜¯å¯¹ç±»å†…éƒ¨ç§æœ‰å±æ€§è¿›è¡Œç›¸å…³çš„èµ‹å€¼æ“ä½œä»¥åŠå¯¹ç¡¬ä»¶è®¾å¤‡è¿›è¡Œç›¸å…³çš„è®¾ç½®å§ã€‚</div><div class="line">â€ƒâ€ƒç°åœ¨æ¥çœ‹çœ‹æ–¹æ³•``initRendering``ï¼Œè¿™ä¸ªæ–¹æ³•é‡Œé¢ä¸»è¦æ˜¯åšäº†ä¸€äº›OpenGLESçš„ä¸œè¥¿ï¼Œæˆ‘ä»¬åªéœ€è¦çŸ¥é“é‡Œé¢åšäº†ä¸€äº›å’Œå…·ä½“ä¸šåŠ¡é€»è¾‘æ— å…³çš„ä¸œè¥¿å°±è¡Œäº†ã€‚</div><div class="line">â€ƒâ€ƒæ¥ä¸‹æ¥çœ‹``renderFrameVuforia``çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿæºä»£ç ä¸­è¯´çš„å¾ˆæ¸…æ¥šï¼šä½¿ç”¨OpenGLç»˜åˆ¶å½“å‰å¸§ï¼Œ__å½“éœ€è¦å°†å½“å‰å¸§æ¸²æŸ“åˆ°å±å¹•ä¸Šæ—¶__ï¼ŒVuforiaä¼šå®šæœŸçš„åœ¨åå°çº¿ç¨‹è°ƒç”¨è¯¥æ–¹æ³•ã€‚åŒæ ·å’Œä¸šåŠ¡é€»è¾‘æ— å…³ï¼Œæºç ä¸ç»†çœ‹ã€‚åŒæ ·æ–¹æ³•``renderVideoBackground``ä¹Ÿæ˜¯ä½¿ç”¨OpenGLæ¥åšï¼Œæˆ‘ä»¬åªéœ€è¦ä»è¯¥æ–¹æ³•çš„åå­—å¾—çŸ¥å…¶ç”¨é€”ï¼ˆåå°æ¸²æŸ“è§†é¢‘ï¼‰å³å¯ã€‚</div><div class="line">â€ƒâ€ƒ``configureVideoBackgroundWithViewWidth:andHeight:``æ–¹æ³•ä»åå­—å°±å¯ä»¥çŸ¥é“å…¶ä½œç”¨ã€‚``updateRenderingPrimitives``æ–¹æ³•çš„ä½œç”¨æ˜¯ï¼šå½“å±å¹•å°ºå¯¸å‘ç”Ÿæ”¹å˜æˆ–è€…æ˜¯è®¾å¤‡æœå‘æ”¹å˜ä¹‹åï¼Œè°ƒç”¨è¯¥æ–¹æ³•æ¥æ›´æ–°æ¸²æŸ“åŸå§‹æ•°æ®ã€‚</div><div class="line">â€ƒâ€ƒæœ€åéœ€è¦ä»‹ç»ä¸€ä¸‹è¯¥ç±»å¾ˆé‡è¦çš„çš„ä¸€ä¸ªåè®®æ–¹æ³•ï¼š``renderFrameWithState ``ï¼Œè¯¥æ–¹æ³•è¢«ç”¨äºè·å–æ¸²æŸ“ç›¸å…³çš„æ•°æ®ã€‚é€šè¿‡å¯¹.mmæ–‡ä»¶å¯çŸ¥ï¼Œæ¯æ¸²æŸ“ä¸€æ¬¡éƒ½ä¼šè°ƒç”¨è¯¥æ–¹æ³•ä¸€æ¬¡ã€‚</div><div class="line"></div><div class="line">#### ImageTargetsEAGLViewç±»</div><div class="line">è¯¥ç±»çš„å¤´æ–‡ä»¶æ‰€æš´éœ²å‡ºæ¥çš„åˆå§‹åŒ–æ–¹æ³•``- (id)initWithFrame:(CGRect)frame appSession:(SampleApplicationSession *) app``ï¼Œæˆ‘ä»¬ä»¥è¯¥æ–¹æ³•å…¥æ‰‹æ¥åˆ†æã€‚ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºå½“å‰è§†å›¾çš„å¤§å°è®¾ç½®ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºå‰é¢æˆ‘ä»¬è®²åˆ°è¿‡çš„ä¸€ä¸ªç±»å®ä¾‹ã€‚å¤´æ–‡ä»¶ä¸­ä½™ä¸‹çš„æ–¹æ³•è¿˜æœ‰ï¼š</div></pre></td></tr></table></figure>
</li>
<li><p>(void)finishOpenGLESCommands;</p>
</li>
<li><p>(void)freeOpenGLESResources;</p>
</li>
<li><p>(void) setOffTargetTrackingMode:(BOOL) enabled;</p>
</li>
<li>(void) configureVideoBackgroundWithViewWidth:(float)viewWidth andHeight:(float)viewHeight;</li>
<li>(void) updateRenderingPrimitives;<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">æ–¹æ³•``finishOpenGLESCommands , freeOpenGLESResources ``åˆ†åˆ«å¯¹åº”ç€ç»“æŸOpenGLå’Œé‡Šæ”¾OpenGLçš„èµ„æºã€‚configureVideoBackgroundWithViewWidth:andHeight: , updateRenderingPrimitiveså’Œç±»SampleAppRendererå…¬å¼€çš„æ–¹æ³•åä¸€æ ·ï¼Œè¿™é‡Œæˆ‘çŒœæµ‹å®ƒä»¬ä½œç”¨æ˜¯ä¸€æ ·çš„ã€‚``setOffTargetTrackingMode:``æ–¹æ³•ä½œç”¨ç›®å‰è¿˜ä¸æ˜¯å¾ˆæ¸…æ™°ï¼Œéœ€è¦å».mmæ–‡ä»¶ä¸­è¯¦æŸ¥ã€‚</div><div class="line">â€ƒâ€ƒç°åœ¨è¿›å…¥å®ç°æ–‡ä»¶ä¸­ï¼Œæºç ä¸­æåˆ°äº†å…³äºOpenGLçº¿ç¨‹å®‰å…¨çš„é—®é¢˜ã€‚iOSä¸Šçš„OpenGL ESæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œåœ¨ç¨‹åºä¸­Vuforiaä½¿ç”¨ä¸‹é¢çš„æ–¹æ³•æ¥ä¿è¯çº¿ç¨‹ï¼ˆOpenGL ä¸Šä¸‹æ–‡ï¼‰å®‰å…¨ï¼š</div><div class="line">- aã€åœ¨ä¸»çº¿ç¨‹ä¸­åˆ›å»ºOpenGL ESä¸Šä¸‹æ–‡ã€‚</div><div class="line">- bã€Vuforiaç›¸æœºå¼€å§‹æ—¶ï¼Œå°†å…¶ä½äºæˆ‘ä»¬è‡ªå·±EAGLViewè§†å›¾ä¸Šï¼Œå¹¶å¼€å¯rendererçº¿ç¨‹ã€‚</div><div class="line">- cã€Vuforiaä¼šåœ¨rendererçº¿ç¨‹ä¸Šï¼Œå®šæœŸè°ƒç”¨æˆ‘ä»¬çš„renderFrameVuforiaï¼ˆSampleAppRendererç±»æåˆ°ï¼‰æ–¹æ³•ã€‚å½“ç¬¬ä¸€æ¬¡è°ƒç”¨è¯¥æ–¹æ³•çš„æ—¶å€™ï¼Œ``defaultFramebuffer``å¹¶ä¸å­˜åœ¨ï¼Œè°ƒç”¨createFramebufferæ–¹æ³•æ¥åˆ›å»ºå®ƒã€‚createFramebufferç”±ä¸»çº¿ç¨‹è°ƒç”¨ï¼Œè€Œä¸æ­¤åŒæ—¶rendererçº¿ç¨‹ä¼šè¢«é˜»å¡ã€‚å› æ­¤ç¡®ä¿OpenGL ESä¸Šä¸‹æ–‡ä¸ä¼šè¢«å¹¶è¡Œä½¿ç”¨</div><div class="line"></div><div class="line">åœ¨initWithFrame:appSession:çš„å®ç°æ–¹æ³•ä¸­ä¼šè¿›è¡Œsessionï¼ŒOpenGLçš„contextå’ŒRendererçš„èµ‹å€¼ï¼Œåˆå§‹åŒ–å’Œç»‘å®šå·¥ä½œã€‚è€Œæ–¹æ³•configureVideoBackgroundWithViewWidth:andHeight: , updateRenderingPrimitivesåœ¨å…¶å®ç°æ–¹æ³•ä¸­çš„ç¡®åªæ˜¯ç®€å•çš„è°ƒç”¨äº†ä¸€ä¸‹SampleAppRenderer ç±»çš„å®ä¾‹æ–¹æ³•ã€‚</div><div class="line">â€ƒâ€ƒç°åœ¨ä¸»è¦æ¥çœ‹çœ‹æ–¹æ³•``setOffTargetTrackingMode :``ï¼Œå®ƒçš„å®ç°å¾ˆç®€å•åªæ˜¯å¯¹å…¶ç§æœ‰æˆå‘˜å˜é‡NOã€‚ä½†æ˜¯å´åœ¨åè®®æ–¹æ³•``renderFrameWithState ``ä¸­å¤§é‡çš„ä½¿ç”¨ã€‚è¯¥æ–¹æ³•å¤§éƒ¨åˆ†æ˜¯OpenGLç›¸å…³çš„å·¥ä½œï¼Œæˆ‘æ²¡æœ‰æ·±ç©¶ä¸‹å»ï¼Œåªæ•´ç†å‡ºæ¥ä¸€ä¸ªå·¥ä½œæµç¨‹å›¾ï¼š</div><div class="line">![å›¾-2](http://upload-images.jianshu.io/upload_images/619906-cfd6bcc49e13644a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)</div><div class="line">ç›®å‰æ¥çœ‹ImageTargetsEAGLViewç±»çš„ä¸»è¦ä½œç”¨åœ¨äºä¿è¯OpenGLåœ¨iOSä¸­è¾¾åˆ°çº¿ç¨‹å®‰å…¨ï¼Œåˆ›å»ºbufferå’Œå¯¹bufferçš„ç®¡ç†ï¼Œæä¾›äº†å¯¹OpenGLçš„æ§åˆ¶ï¼Œè€Œå®é™…çš„æ¸²æŸ“åˆ™ç”±SampleAppRendereræ¥å®ç°ã€‚</div><div class="line"></div><div class="line">#### ImageTargetsViewControllerç±»</div><div class="line">ç°åœ¨å°†ç›®å…‰å›åˆ°``ImageTargetsViewController``ç±»ä¸Šé¢æ¥ã€‚ç”±äºæ˜¯ä¸€ä¸ªæ§åˆ¶å™¨ç±»ï¼Œæ‰€ä»¥æˆ‘ç›´æ¥ä».mmæ–‡ä»¶ä¸­ç€æ‰‹ã€‚æ ¹æ®ViewControllerçš„åŠ è½½é¡ºåºæ¥çœ‹å…·ä½“çš„é€»è¾‘ï¼Œé¦–å…ˆæŸ¥æ‰¾``loadView``æ–¹æ³•ï¼Œå¦‚æœæ²¡æœ‰åˆ™æŸ¥æ‰¾``viewDidLoad``ã€‚æºç ä¸­ï¼ŒloadViewæ–¹æ³•ä¸»è¦åˆ›å»ºäº†vappï¼ŒeaglViewä»¥åŠå¯¹vappåˆå§‹åŒ–äº†ARç›¸å…³çš„äº‹åŠ¡ï¼ˆå…¶ä»–è§†å›¾å’Œæ‰‹åŠ¿ç­‰å…ˆå¿½ç•¥ï¼Œåªå…³å¿ƒå±æ€§vapp,eaglViewç›¸å…³çš„é€»è¾‘ï¼‰ï¼Œå°†ViewControllerçš„Viewè®¾ç½®ä¸ºeaglViewã€‚</div><div class="line">â€ƒâ€ƒåœ¨loadViewä¸­å°†vappçš„ä»£ç†è®¾ç½®ä¸ºæ§åˆ¶å™¨è‡ªèº«ï¼Œæ­¤æ—¶é€šè¿‡ä¸Šé¢ä»‹ç»__ SampleApplicationSession__æ—¶å¯¹åº”çš„ç¨‹åºæ‰§è¡Œæµç¨‹ï¼Œå°†ç›®å…‰æ”¾åœ¨å¯¹åº”çš„éƒ¨åˆ†åè®®æ–¹æ³•ä¸Šé¢ã€‚</div></pre></td></tr></table></figure>
</li>
</ul>
<p>@protocol SampleApplicationControl</p>
<ul>
<li>(void) onInitARDone:(NSError *)error;</li>
<li>(bool) doInitTrackers;</li>
<li>(bool) doLoadTrackersData;</li>
<li>(bool) doStartTrackers;<br>@end<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ä»å›¾-1å¯ä»¥çœ‹å‡ºæ˜¯ç”±``doInitTrackers``çš„è¿”å›å€¼æ¥åˆ¤æ–­æ˜¯å¦éœ€è¦å»åŠ è½½trackeræ•°æ®(doLoadTrachersData)ï¼Œæœ€ååœ¨onInitARDoneæ–¹æ³•æµç¨‹ç»“æŸã€‚é€šè¿‡è¿™ä¸ªå°±ç¡®å®šäº†æˆ‘ä»¬çš„æºç æŸ¥çœ‹é¡ºåºï¼š</div></pre></td></tr></table></figure>
</li>
</ul>
<p>/// doInitTrackers â€“&gt; doLoadTrackersData â€“&gt; onInitARDone<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">é‚£ä¹ˆåœ¨ImageTargetsViewControllerç±»ä¸­ï¼Œå…¶æµç¨‹å›¾å¦‚ä¸‹ï¼š</div><div class="line">![å›¾-3](http://upload-images.jianshu.io/upload_images/619906-aadd870b1aae0265.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)</div><div class="line">è‡ªæ­¤æˆ‘ä»¬çš„æºç é˜…è¯»å°±å‘Šä¸€æ®µè½ï¼Œæœ€åæˆ‘ä»¬å°†è¦å»å®ç°å¼€å§‹æåˆ°çš„ç›®çš„ï¼</div><div class="line">## æ”¶å°¾</div><div class="line">è¯»åˆ°è¿™é‡Œï¼Œè‡ªå®šä¹‰çš„æ•°æ®é›†çš„åˆ‡å…¥ç‚¹åœ¨æ–¹æ³•__``doLoadTrackersData ``__æ–¹æ³•ä¸­ï¼Œå¹¶ä¸”è¦doInitTrackersæ–¹æ³•è¿”å›YESã€‚å¦‚æœæ²¡æœ‰æ‰§è¡Œâ€œå®‰è£…æ­¥éª¤â€ä¸­çš„ç¬¬5æ­¥çš„è¯ï¼Œç°åœ¨å¯ä»¥å»åšäº†ï¼åšå®Œä¹‹åæ·»åŠ å¦‚ä¸‹ä»£ç åˆ°å·¥ç¨‹ä¸­ï¼š</div></pre></td></tr></table></figure></p>
<p>///ImageTargetsViewController.mm -&gt; doLoadTrackersData<br>dataSetCustom = [self loadObjectTrackerDataSet:@â€WillDB_Device.xmlâ€];/// è¿™ä¸ªdatasetä¸ºä½ è‡ªå·±çš„åå­—<br>if (dataSetCustom == NULL) {<br>    return NO;<br>}<br>if (! [self activateDataSet:dataSetCustom]) {<br>    return NO;<br>}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">è¿è¡Œç¨‹åºï¼Œæ‰«æå¯¹åº”çš„å›¾ç‰‡å‘ç°æ˜¯èƒ½å¤ŸæˆåŠŸæ‰«æå¯¹åº”çš„å›¾ç‰‡çš„ã€‚ä½†æ˜¯ç³»ç»Ÿçš„å›¾ç‰‡èƒ½å‡ºæ¥ä¸€ä¸ªâ€œèŒ¶å£¶â€ï¼Œè€Œæˆ‘ä»¬è‡ªå·±çš„å›¾ç‰‡ä¸Šé¢ä»€ä¹ˆä¹Ÿæ²¡æœ‰å‘¢ï¼Ÿ</div><div class="line">åœ¨è¿™é‡Œæˆ‘ä¸æƒ³åˆå»ä½¿ç”¨è¿™ä¸ªçƒ¦äººçš„â€œèŒ¶å£¶â€OpenGLæ¨¡å‹äº†ï¼Œæˆ‘é€‰æ‹©çš„æ˜¯ä¸€ä¸ªçš®å¡ä¸˜çš„åŸå‹ï¼ˆåœ¨æ–‡æœ«æˆ‘ä¼šå°†æ”¹é€ è¿‡çš„demoä¼ åˆ°Githubå¯ä»¥å»é‚£é‡Œä¸‹è½½è¿™ä¸ªåŸå‹ï¼‰ã€‚</div><div class="line">#### æ¨¡å‹objåˆ°openglæ•°æ®çš„è½¬æ¢</div><div class="line">å°±ç›®å‰æˆ‘çŸ¥é“çš„æ¥è¯´ï¼Œåœ¨Xcodeä¸­æ— æ³•ä½¿ç”¨__.obj__çš„æ¨¡å‹æ•°æ®çš„ã€‚æˆ‘åœ¨ç½‘ä¸Šæ‰¾åˆ°äº†ä¸€ä¸ªå·¥å…·**[obj2opengl](https://github.com/HBehrens/obj2opengl)**ï¼Œå…·ä½“çš„ä½¿ç”¨æ–¹æ³•è§[è¿™é‡Œ](http://heikobehrens.net/2009/08/27/obj2opengl/)ï¼Œæˆ‘è¿˜æ˜¯å¤§ä½“æ¥è¯´ä¸€ä¸‹ä½¿ç”¨æ­¥éª¤ï¼š</div><div class="line">å°†ä¸‹è½½å¥½çš„æ–‡ä»¶æ”¾åˆ°ç‰¹å®šçš„æ–‡ä»¶å¤¹ä¸­ï¼Œç„¶åæŠŠå¯¹åº”çš„objæ–‡ä»¶å’Œå®ƒæ”¾åœ¨ä¸€èµ·ï¼Œä½¿ç”¨ç»ˆç«¯è¿›å…¥__obj2opengl.pl__æ–‡ä»¶æ‰€åœ¨æ–‡ä»¶å¤¹ä¹‹åï¼Œè¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼š</div></pre></td></tr></table></figure></p>
<p>./obj2opengl.pl yourobjfilename<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">æˆåŠŸåï¼Œå®ƒä¼šç”Ÿæˆä¸€ä¸ªå¤´æ–‡ä»¶ï¼Œè¿™å°±æ˜¯é€šè¿‡objæ–‡ä»¶ç”Ÿæˆçš„çº¹ç†åæ ‡ä»£ç ï¼Œåœ¨è¯¥å¤´æ–‡ä»¶ä¸­æœ‰3ä¸ªæ•°ç»„ï¼Œè¿™ä¸‰ä¸ªæ•°ç»„åˆ†åˆ«å¯¹åº”ç€__xxxVerts [], xxxNormals [], xxxTexCoords []__ï¼Œå’Œä¸€ä¸ªxxxxNumVertsï¼ˆxxxä¸ºä½ çš„objæ–‡ä»¶åå­—ï¼‰ï¼Œ[å…·ä½“ä½¿ç”¨è¯´æ˜](http://heikobehrens.net/2009/08/27/obj2opengl/)ã€‚</div><div class="line"></div><div class="line">#### æ¨¡å‹æ›¿æ¢</div><div class="line">é€šè¿‡å‰é¢çš„æºç é˜…è¯»ï¼Œæˆ‘ä»¬çŸ¥é“ImageTargetsViewControllerç±»æ˜¯ç”¨æ¥åŠ è½½trackeræ•°æ®çš„ï¼ŒSampleAppRendererç±»æ˜¯åšæ¸²æŸ“ç›¸å…³çš„æ•°æ®ï¼ŒSampleApplicationSessionç±»æ˜¯ä½¿ç”¨trackeræ•°æ®å¹¶æ§åˆ¶ARï¼Œæœ€ååªå‰©ä¸‹ä¸€ä¸ªImageTargetsEAGLViewç±»ã€‚åœ¨è¯¥ç±»ä¸­ä¼šåšå¦‚ä¸‹æ“ä½œï¼š</div><div class="line">- 1ã€åœ¨textureFilenamesæ•°ç»„ä¸­ï¼Œæ·»åŠ ä¸€ä¸ªæ–°çš„[çº¹ç†](https://learnopengl-cn.readthedocs.io/zh/latest/01%20Getting%20started/06%20Textures/)ã€‚è¿™ä¸ªè‡ªå·±é€‰æ‹©ä¸€ä¸ªçº¹ç†å›¾ç‰‡ï¼Œæˆ‘æ˜¯éšä¾¿é€‰çš„ï¼Œæ‰€ä»¥çœ‹èµ·æ¥ä¼šå¾ˆä¸‘ã€‚</div><div class="line">- 2ã€åœ¨ImageTargetsEAGLViewç±»çš„å¤´æ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸ªç§æœ‰æˆå‘˜å˜é‡__pikachuModel__ã€‚ç”¨å®ƒæ¥ä»£æ›¿ä¾‹å­ä¸­çš„buildingModelã€‚å¹¶åœ¨SampleApplication3DModel.hæ–‡ä»¶ä¸­æ·»åŠ æ–¹æ³•``pikachu_ReWrite ``ï¼Œå¹¶åœ¨SampleApplication3DModel.mæ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š</div></pre></td></tr></table></figure></p>
<ul>
<li><p>(void)pikachu_ReWrite{<br>#if kUse3DModel == 1<br>_numVertices = XY_PikachuMNumVerts;<br>_vertices = XY_PikachuMVerts;<br>_normals = XY_PikachuMNormals;<br>_texCoords = XY_PikachuMTexCoords;<br>#endif<br>}</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">- 3ã€åœ¨ImageTargetsEAGLView.mmçš„æ–¹æ³•``loadBuildingsModel``ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š</div></pre></td></tr></table></figure>
<p>pikachuModel = [[SampleApplication3DModel alloc] init];<br>[pikachuModel pikachu_ReWrite];</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">- 4ã€å°†ImageTargetsEAGLView.mmæ–‡ä»¶ä¸­æ‰€æœ‰çš„buildingModelæ›¿æ¢ä¸º__pikachuModel__ï¼Œæœ€åè°ƒèŠ‚ä¸€ä¸‹å˜é‡__kObjectScaleOffTargetTracking__çš„å€¼ï¼Œè¿™ä¸ªå€¼è°ƒèŠ‚ç”±è‡ªå·±å†³å®šã€‚</div><div class="line"></div><div class="line">ä¸Šè¿°çš„ä¿®æ”¹çµæ„Ÿå¤§å¤šæ˜¯æ¥è‡ªå¤´æ–‡ä»¶__Teapot.h__ï¼Œä½†æ˜¯æˆ‘ä»¬ä½¿ç”¨obj2openglæ—¶ç”Ÿæˆçš„æ–‡ä»¶ä¸­å¹¶æ²¡æœ‰Teapot.hä¸­__teapotIndices__å¯¹åº”çš„æ•°ç»„ã€‚ç›¸åå¤šäº†ä¸€ä¸ªæ— ç¬¦å·çš„æ•´å½¢å˜é‡``xxxNumVerts``ï¼Œæ‰€ä»¥é™¤äº†ä¸Šè¯‰çš„æ–¹æ³•ä»¥å¤–è¿˜æœ‰å¦å¤–ä¸€ç§æ–¹æ³•ï¼Œå…·ä½“çš„ä»£ç ä¿®æ”¹å¦‚ä¸‹ï¼š</div></pre></td></tr></table></figure>
</li>
</ul>
<p>/// ImageTargetsEAGLView.mm -&gt; renderFrameWithStateæ–¹æ³•ä¸­<br>glVertexPointer(3, GL_FLOAT, 0, XY_PikachuMVerts);<br>glNormalPointer(GL_FLOAT, 0, XY_PikachuMNormals);<br>glTexCoordPointer(2, GL_FLOAT, 0, XY_PikachuMTexCoords);</p>
<p>glDrawArrays(GL_TRIANGLES, 0, XY_PikachuMNumVerts);<br><code>`
åœ¨ä½¿ç”¨è¿™ä¸ªæ–¹æ³•æ—¶å…¶ï¼ˆç”¨obj2openglç”Ÿæˆçš„å¤´æ–‡ä»¶çš„æ•°ç»„ä¸­çš„ï¼‰æ•°å€¼æ¯”ä¾‹æ˜¯éœ€è¦ä¿®æ”¹çš„ï¼Œè€Œä¸”è¿˜éœ€è¦å¯¹æ¨¡å‹è¿›è¡Œç¿»è½¬ã€‚è¿™ä¸ªæ–¹æ³•å…·ä½“è§[How do I replace the Teapot](https://developer.vuforia.com/forum/faq/android-how-do-i-replace-teapot)å’Œ[Replace the teapot model](https://library.vuforia.com/articles/Solution/Working-with-Vuforia-and-OpenGL-ES)ã€‚
åœ¨ä¿®æ”¹æºç æ—¶ä¸»è¦å°±æ˜¯åœ¨ä¿®æ”¹æ–¹æ³•</code>renderFrameWithState``ï¼Œå®ƒåœ¨ä»‹ç»ImageTargetsEAGLViewç±»æ—¶åœ¨æ–‡ä»¶çš„æœ€å¼€å¤´å°±æœ‰æåˆ°ï¼Œå®ƒæ˜¯åœ¨æ¯æ•æ‰åˆ°ä¸€æ¬¡trackerä¹‹åå°±ä¼šè¿è¡Œä¸€æ¬¡ã€‚<br>åˆ°è¿™é‡Œä¸€ä¸ªå¾ˆåŸºæœ¬çš„Vuforiaé›†æˆï¼Œæºç çš„è§£è¯»ä»¥åŠè‡ªå®šä¹‰trackerå’Œæ¨¡å‹å°±ç®—å®Œæˆäº†ï¼Œæœ€åé™„ä¸ŠDemo<a href="">åœ°å€</a>ã€‚</p>
<h2 id="ç›¸å…³é“¾æ¥"><a href="#ç›¸å…³é“¾æ¥" class="headerlink" title="ç›¸å…³é“¾æ¥"></a>ç›¸å…³é“¾æ¥</h2><ul>
<li><a href="http://heikobehrens.net/2009/08/27/obj2opengl/" target="_blank" rel="external">obj2opengl</a></li>
<li><a href="https://github.com/HBehrens/obj2opengl" target="_blank" rel="external">obj2opengl Github</a></li>
<li><a href="http://www.songho.ca/opengl/gl_transform.html" target="_blank" rel="external">OpenGL Transformation</a></li>
<li><a href="https://developer.vuforia.com/forum/faq/android-how-do-i-replace-teapot" target="_blank" rel="external">How do I replace the Teapot</a></li>
</ul>
</div></article></div></main><footer><div class="paginator"><a href="/2017/08/01/oc_bridge_c_memory/" class="next">NEXT</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'seansun';
var disqus_identifier = '2017/09/13/ios_nativa_vuforia/';
var disqus_title = 'iOSä¸­Nativeçš„æ–¹å¼é›†æˆVuforiaã€å…¶æºç è§£è¯»ä»¥åŠè‡ªå®šä¹‰æ¨¡å‹';
var disqus_url = 'http://yoursite.com/2017/09/13/ios_nativa_vuforia/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//seansun.disqus.com/count.js" async></script><div class="copyright"><p>å…³æ³¨å¾®åš<a href="http://weibo.com/wwloading" target="_blank">@å‡Œäº‘å£®å¿—å¹¾å¤šæ„</a>ï¼Œè®©æˆ‘ä»¬æœ‰æ›´å¤šçš„è”ç³»ã€‚</p><p>Â© 2016 - 2017 <a href="http://yoursite.com">ç‹æœ›</a>, Powered By <a href="https://hexo.io/" target="_blank">Hexo</a></p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>