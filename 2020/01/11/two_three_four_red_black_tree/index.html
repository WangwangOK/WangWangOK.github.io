<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 简单了解2-3树、2-3-4树和红黑树 · 凌云壮志幾多愁</title><meta name="description" content="简单了解2-3树、2-3-4树和红黑树 - 王望"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/uploads/avatar/heart.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://yoursite.com/atom.xml" title="凌云壮志幾多愁"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/uploads/avatar/pencil.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/wwloading" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/wangwangok" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="https://legacy.gitbook.com/@wangwangok" target="_blank" class="nav-list-link">GITBOOK</a></li><li class="nav-list-item"><a href="http://www.jianshu.com/u/11188e5bb304" target="_blank" class="nav-list-link">JIANSHU</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">简单了解2-3树、2-3-4树和红黑树</h1><div class="post-info">Jan 11, 2020</div><div class="post-content"><p>在这篇文章中，我主要是将数据结构中的2-3树、2-3-4树、红黑树进行了整理。由于本篇字数、图片以及代码较多，可选择自己比较在于的部分阅读，但我建议是从上往下依次阅读。</p>
<p>毕竟大部分人可能比较关心红黑树。但是怎么是从2-3到红黑树的，这个过程是很值得了解的。而在文章的最后，我也大致手撸了一套2-3树相关操作的代码。</p>
<h2 id="一、2-3树"><a href="#一、2-3树" class="headerlink" title="一、2-3树"></a>一、2-3树</h2><blockquote>
<p>一颗2-3树中的每个结点的度为2，或者3；其中度为2的称为2节点，度为3的称为3节点。</p>
</blockquote>
<p>该树或者为空，或者满足以下性质：</p>
<ul>
<li><p>每个内部节点可以是2节点，也可以是一个3节点。<strong>2节点存放一个元素，3节点存放两个元素</strong> ；</p>
</li>
<li><p><strong>2节点</strong> ：的两个子节点分别是：left_child, middle_child；该节点的存放元素为data_l，该元素的关键字为data_l.key。<br>以left_child为根的子树中所有节点的关键字（data_l.key）都小于该节点的data_l.key；以middle_child为根的子树中所有节点的关键字都大于该节点的data_l.key；</p>
</li>
<li><p><strong>3节点</strong> ：的三个子节点分别是：left_child, middle_child, right_child；该节点存放的两个元素分别为data_l, data_r。它们对应的元素关键字为data_l.key，data_r.key。<br>以left_child为根的子树中所有节点关键字(data_l.key)都小于data_l.key；以middle_child为根的子树所有节点都大于data_l.key，小于data_r.key；以right_child为根的子树所有节点都大于data_r.key；</p>
</li>
<li><p>4、<strong>所有的外部节点都位于同一层</strong> （null节点）。</p>
</li>
</ul>
<p><img src="/uploads/two_three_four_red_black/1.png" alt=""></p>
<h3 id="查找"><a href="#查找" class="headerlink" title="查找"></a>查找</h3><p>1）、首先我们查看是2节点，还是3节点。通过查看data_r是否为INT_MAX（由于0可能是正常存储的元素，因此这里取的是INT_MAX）来确定，如果为INT_MAX则为2节点；</p>
<p>2）、如果是2节点：小于则沿着left_child查找，大于则沿着middle_child查找；相等则查找成功；</p>
<p>3）、如果是3节点：小于data_l则沿着left_child，大于data_l且小于data_r则沿着middle_child，大于data_r则沿着right_child；如果相等则查找成功</p>
<h3 id="插入操作"><a href="#插入操作" class="headerlink" title="插入操作"></a>插入操作</h3><p>当待查关键字不在2-3树中时，查找过程中将遇到唯一的叶节点（空节点）。如果节点只包含一个元素，那么就可以将新元素插入到该节点中。以构成3节点；</p>
<p>插入操作相对来说要复杂一点，但是理解透彻了也并不复杂。下面来仔细看一下插入过程，这里以插入数字30为例；</p>
<p>1）、首先我们的初始2-3树如下：</p>
<p><img src="/uploads/two_three_four_red_black/2.png" alt=""></p>
<p>2）、现在我们插入数字30，它大于20，因此它应该处于3节点（B）的right_child里面。但是我们看看上面2-3树的性质4：所有的外部节点都位于同一层，所以现在我将30放入节点B这一层：</p>
<p><img src="/uploads/two_three_four_red_black/3.png" alt=""></p>
<p>3）、但这明显不是2-3树，它存在了既不是2节点，也不是三节点的节点，因此我们需要改造它。改造的方法就是将20向上提：</p>
<p><img src="/uploads/two_three_four_red_black/4.png" alt=""></p>
<p>4）、没办法，这又不符合预期。它依然违反了性质4，因此我们还需要改动。继续提20：</p>
<p><img src="/uploads/two_three_four_red_black/5.png" alt=""></p>
<p>到这里我们大致上完成了2-3树中插入30的操作。主要就是先找到最直观的插入地址，然后一步一步的去更新该树，以符合2-3树的性质。</p>
<blockquote>
<p>可以简单的理解2-3树的插入操作是从叶子节点向上生长的过程</p>
</blockquote>
<p>下面我们来看一个更加复杂的插入例子。为了画图简单起见，2-3节点中的2节点的另一个data_r，以及每个为空的叶子节点就不画出了，因此下图中只有一个数据域的为2节点，有两个数据域的为3节点。下面以插入数字50为例：</p>
<p><img src="/uploads/two_three_four_red_black/6.png" alt=""></p>
<p>这是类似的，就是节点向上移动的过程。我们大致看了一下插入操作，就是不断去满足2-3树的性质的同时去做节点上移的事儿。</p>
<p>下面我们再来看看2-3树的删除操作。</p>
<h3 id="删除操作（旋转和合并）"><a href="#删除操作（旋转和合并）" class="headerlink" title="删除操作（旋转和合并）"></a>删除操作（旋转和合并）</h3><p>后面的删除都以下面这棵树为基础进行：</p>
<p><img src="/uploads/two_three_four_red_black/7.png" alt=""></p>
<h4 id="非叶节点删除"><a href="#非叶节点删除" class="headerlink" title="非叶节点删除"></a>非叶节点删除</h4><p>首先，如果要删除的元素不在叶节点中，则可以用一个叶节点中的适当元素与待删除元素进行交换，从而将该删除操作转化为在叶节点上的删除操作。</p>
<blockquote>
<p>一般情况下，我们可以用被删除元素的左子树中关键字最大的元素，或者右子树中关键字最小的元素与该元素交换。</p>
</blockquote>
<p>总的来说就是把非叶节点的删除转换为叶节点的删除操作，而叶节点的删除操作又分为2节点和3节点删除操作。</p>
<h4 id="3叶节点删除"><a href="#3叶节点删除" class="headerlink" title="3叶节点删除"></a>3叶节点删除</h4><p>3节点的删除操作相对比较简单，大致的规则如下：</p>
<ul>
<li><p>1）、如果要删除3节点的data_l时，当删除之后需要将data_r的关键字移动到data_l处。并且将data_r清零或者置为一个最大值即可；</p>
<p>  <img src="/uploads/two_three_four_red_black/8.png" alt=""></p>
</li>
</ul>
<p>这是以上面基础2-3树删除3节点中的data_l（10）域之后的结果。</p>
<ul>
<li><p>2）、如果要删除3节点的data_r时，直接将其清零或者置为一个最大值即可；</p>
<p>  <img src="/uploads/two_three_four_red_black/9.png" alt=""></p>
</li>
</ul>
<p>这里是将基础2-3树删除3节点中data_r（70）域之后的结果。</p>
<h4 id="2叶节点删除"><a href="#2叶节点删除" class="headerlink" title="2叶节点删除"></a>2叶节点删除</h4><p>对于2节点的删除操作相对比较复杂一点，它并不能像3节点那样简单的删除就行了。因为2节点直接删除对应的data_l域的话，将会导致整个节点变为空。因此需要分多种情况来讨论：</p>
<h5 id="旋转"><a href="#旋转" class="headerlink" title="旋转"></a>旋转</h5><p>待删除节点为2节点，且该节点的相邻兄弟子树有一个是3节点时我们使用旋转的操作。</p>
<ul>
<li>1）、待删除元素为左儿子，并且其中右边的兄弟子树（只看相邻兄弟子树）为3节点；</li>
</ul>
<p><img src="/uploads/two_three_four_red_black/10.png" alt=""></p>
<p>其中x为待删除节点的元素。</p>
<ul>
<li>2）、待删除元素为中儿子，并且其左兄弟或者右兄弟为3节点；</li>
</ul>
<p><img src="/uploads/two_three_four_red_black/11.png" alt=""></p>
<p>其中x为待删除节点的元素。</p>
<ul>
<li>3）、待删除元素为右儿子，并且其中左边兄弟子树（只看相邻兄弟子树）为3节点；</li>
</ul>
<p><img src="/uploads/two_three_four_red_black/12.png" alt=""></p>
<blockquote>
<p><strong>旋转操作不删除节点</strong>！！！</p>
</blockquote>
<h5 id="合并"><a href="#合并" class="headerlink" title="合并"></a>合并</h5><p>旋转解决了当被删除元素为2节点，并且其左右两边的兄弟子树存在3节点的情况。那如果被删除节点左右两边都不存在3节点时，需要怎么处理呢？<br>这时候就需要用到合并操作。</p>
<blockquote>
<p>合并操作用于2节点删除时，其左右兄弟同样为2节点时！<br><strong>合并操作会删除节点</strong>！！！</p>
</blockquote>
<p>和旋转类似，我们同样需要看被删除元素所在节点的位置。由于待删除节点左右兄弟子树存在3节点时都可以使用旋转的操作，所以以下所有的情形中所有待删除元素的相邻子树中都不会不会存在3节点。</p>
<p>下面具体的合并分类：</p>
<ul>
<li>1）、待删除节点为左儿子；</li>
</ul>
<p><img src="/uploads/two_three_four_red_black/13.png" alt=""><br>这里当父节点未3节点时，变换的第二步时如果其右子树为2节点时，我们同样可以将b下降到右子树中，而a保持不变。</p>
<ul>
<li>2）、待删除节点为中儿子；</li>
</ul>
<p><img src="/uploads/two_three_four_red_black/14.png" alt=""></p>
<p>过渡态中：c&lt;a&lt;b&lt;d，结果的合并基于该大小关系。</p>
<ul>
<li>3）、待删除节点为右儿子；</li>
</ul>
<p><img src="/uploads/two_three_four_red_black/15.png" alt=""></p>
<p>过渡态中：c&lt;a&lt;d&lt;b，结果的合并基于该大小关系。</p>
<h4 id="删除操作总结"><a href="#删除操作总结" class="headerlink" title="删除操作总结"></a>删除操作总结</h4><p>1）、非叶子节点，先将其转换为叶子节点之后操作；</p>
<p>2）、3节点删除直接删除即可，只不过需要注意剩下元素必须在data_l中；</p>
<p>3）、2节点的删除一定要牢记2-3树的四条性质来进行旋转和合并操作；</p>
<p>4）、节点变化的基础是我们在定义2-3树时，左儿子、中儿子、右儿子，以及节点的左右数据域的大小关系。</p>
<p>很显然，执行一次旋转和执行一次合并操作的时间复杂度为O(1)。如果执行的是（删除中的）旋转操作，那么一次旋转完成后删除就会结束；</p>
<p>在删除过程中，执行的合并操作次数不会超过2-3树的高度。因此对于包含n个节点的2-3树，其删除操作的时间复杂度为O(logn)；</p>
<h2 id="二、2-3-4树"><a href="#二、2-3-4树" class="headerlink" title="二、2-3-4树"></a>二、2-3-4树</h2><p>2-3-4树是对2-3树的扩展，其中允许4节点（也就是最多有4个儿子）。它满足的性质和2-3树是类似的，主要还是在他们的大小关系上。下图主要是描述的4节点的结构，2节点和3节点从左到右依次为一个元素（data_l）和两个元素（data_l, data_m）已经对应的子节点：</p>
<p><img src="/uploads/two_three_four_red_black/16.png" alt=""></p>
<p>大小关系如下：</p>
<p>1）、<code>left_child.data_l.key &lt; lef_child.data_m.key &lt; left_child.data_r.key &lt; root.data_l.key</code>;</p>
<p>2）、<code>root.data_l.key &lt; left_mid_child.data_l.key &lt; ... &lt; root.data_m.key</code>;</p>
<p>3）、<code>root.data_m.key &lt; right_mid_child.data_l.key &lt; ... &lt; root.data_r.key</code>;</p>
<p>4）、<code>root.data_r.key &lt; right_child.data_l.key &lt; ... &lt; right_child.data_r.key</code>;</p>
<blockquote>
<p>2-3-4树也要满足所有的外部节点都在同一层上；</p>
</blockquote>
<p>如果一颗高度为h的2-3-4树中只包含2节点，那么该树共有(2^h) - 1个元素（元素个数，不是节点个数）；如果只包含4节点，那么该树共有(4^h) - 1个元素。因此一颗2-3-4树的元素个数为2^h - 1 到 4^h - 1个元素。<br>同样来说包含n个元素的2-3-4树，其高度范围log4(n+1)到log2(n+1)之间。下图是一个2-3-4树的具体例子：</p>
<p><img src="/uploads/two_three_four_red_black/17.png" alt=""></p>
<h3 id="插入操作（拆分4节点、向上移动）"><a href="#插入操作（拆分4节点、向上移动）" class="headerlink" title="插入操作（拆分4节点、向上移动）"></a>插入操作（拆分4节点、向上移动）</h3><p>插入操作我们可以和2-3树做一样的操作，即先从根节点到叶节点向下执行，然后从叶节点到根节点的向上扫描，并逐级调整以满足2-3-4树的性质。</p>
<p>但是对于2-3-4树存在更加高效的方式：</p>
<p> <strong>我们从根节点开始扫描，当扫描到4节点时就对该节点进行拆分操作，主要是看当前4节点父节点来进行适当的拆分操作。依次循环下去，那么到叶子节点时就能保证叶子节点为2节点或者3节点</strong>。</p>
<p>对于一个4节点，需要考虑以下三种不同的情况：</p>
<ul>
<li>1）、<strong>4节点是2-3-4树的根节点</strong>；</li>
</ul>
<p><img src="/uploads/two_three_four_red_black/18.png" alt=""></p>
<p>根节点的拆分会使得2-3-4树的高度增加1。并且拆分之后得到的两个节点都是 <strong>2节点</strong> ；</p>
<ul>
<li>2）、<strong>4节点的父节点是一个2节点</strong>；</li>
</ul>
<p><img src="/uploads/two_three_four_red_black/19.png" alt=""><br>上半部分中4节点作为2节点的左子树，下半部分为4节点作为2节点的右子树。拆分之后得到的两个节点同样都是 <strong>2节点</strong> ；</p>
<ul>
<li>3）、<strong>4节点的父节点是一个3节点</strong>；</li>
</ul>
<p><img src="/uploads/two_three_four_red_black/20.png" alt=""></p>
<p>拆分之后得到的两个节点同样都是 <strong>2节点</strong> ；</p>
<p>到这儿我们就能大致看出规律了：</p>
<blockquote>
<p><strong>4节点的data_m向上提，data_l和data_r自成一个2节点</strong>；</p>
</blockquote>
<h4 id="2-3-4树插入实例"><a href="#2-3-4树插入实例" class="headerlink" title="2-3-4树插入实例"></a>2-3-4树插入实例</h4><p>以下图为原2-3-4树执行插入操作：</p>
<p><img src="/uploads/two_three_four_red_black/21.png" alt=""></p>
<p>1、首先我们插入元素5：从根节点开始扫描，发现根节点为4节点。因此使用第一点中的拆分过程，将4节点的中data_m向上提，独立成一个2节点。此时会使得树的总体高度增加1。然后依次寻找5所在的位置，发现目标叶子节点为一个3节点，符合插入要求，直接插入即可。</p>
<p><img src="/uploads/two_three_four_red_black/22.png" alt=""></p>
<p>2、插入元素14：从根节点开始扫描，发现包含元素【5，12，15】的节点为4节点，而该节点父节点为2节点。因此我们可以使用上面第二点“4节点为父节点是一个2节点”的拆分方法。拆分完成后继续寻找元素14的插入点，发现节点【15】为2节点直接插入。</p>
<p><img src="/uploads/two_three_four_red_black/23.png" alt=""></p>
<p>比如这里插入一个元素77和这个例子很类似。发现节点【72，80，90】为4节点，把元素80向上提，构成新的节点【70，80，99】。然后把元素77插入到节点【72】的右子节点中即可。</p>
<p><img src="/uploads/two_three_four_red_black/24.png" alt=""></p>
<p>因此2-3-4树的插入操作对于2-3树插入操作的优势在于，只需自顶向下单次扫描就可以完成；而2-3树需向下扫描之后，还有元素向上提的过程。</p>
<h3 id="删除操作（合并4节点、向下移动）"><a href="#删除操作（合并4节点、向下移动）" class="headerlink" title="删除操作（合并4节点、向下移动）"></a>删除操作（合并4节点、向下移动）</h3><p>插入操作虽然和2-3树类似，但是需要有效率上的改进。如果没有优势的话，那该查找树存在也没有什么意义。</p>
<p>删除任何元素都可以化简为删除某个叶子节点中的元素。</p>
<blockquote>
<p>如果 <strong>删除元素所在的叶节点是3节点或者4节点</strong> ，直接删除即可。结果分别变成2节点和3节点 ；</p>
</blockquote>
<p>我们可以从根节点到叶节点的向下扫描过程中对2-3-4树进行更新，以达到删除元素时，元素所在叶节点为3节点或者4节点。这样我们就可以避免在类似2-3树删除操作（从叶节点到根节点向上）出现的重建步骤。</p>
<p>向下扫描2-3-4树并进行更新时要求：<strong>每当查找移向下一层节点时，该节点必须是3节点或者4节点</strong>。 </p>
<p>为了描述方便，这里假设当前节点为p，而将要移到的下一个节点为q，也就是说q是p的子节点。r节点为q节点的兄弟节点，当q是p的left_child时，r节点为p的left_mid_child；否则q最近的兄弟节点r就是其左边的兄弟节点。如果看起来有点不顺口，直接对应下面图就行了。<br>下面列出5种情况：</p>
<ul>
<li><p>1）、<strong>p(父节点)是叶子节点</strong> ：此时待删除元素要么在节点p中，要么不存在；</p>
</li>
<li><p>2）、<strong>q不是2节点</strong>：那就是3节点或者4节点，不需要更新。继续寻找下一个节点；</p>
</li>
<li><p>3）、<strong>q是2节点且其兄弟节点r为2节点</strong>：将p、q、r合并成一个4节点。这个过程其实就是2-3-4树插入过程的逆过程（也就是插入里面的三种情况）。其中p节点分为2节点、3节点、4节点；</p>
</li>
</ul>
<p><img src="/uploads/two_three_four_red_black/25.png" alt=""></p>
<ul>
<li>4）、<strong>q是2节点且其兄弟节点为3节点</strong>：</li>
</ul>
<p><img src="/uploads/two_three_four_red_black/26.png" alt=""></p>
<p>这里有个错误，下半部分的应该是y上移动.</p>
<ul>
<li>5）、<strong>q是2节点且其兄弟节点为4节点</strong>：</li>
</ul>
<p><img src="/uploads/two_three_four_red_black/27.png" alt=""></p>
<p>第四种和第五种非常类似。</p>
<h4 id="2-3-4树删除实例"><a href="#2-3-4树删除实例" class="headerlink" title="2-3-4树删除实例"></a>2-3-4树删除实例</h4><p>下面我们来看一个2-3-4树删除元素的实例。在下面的例子中我们删除元素74：</p>
<p><img src="/uploads/two_three_four_red_black/28.png" alt=""></p>
<h2 id="三、红黑树"><a href="#三、红黑树" class="headerlink" title="三、红黑树"></a>三、红黑树</h2><h3 id="从2-3-4树到红黑树"><a href="#从2-3-4树到红黑树" class="headerlink" title="从2-3-4树到红黑树"></a>从2-3-4树到红黑树</h3><p>红黑树相对于2-3-4树能够更有效地节省存储空间，因为对于2-3-4树而言，它如果存在2节点或者3节点是存在data_l或者data_m是没有使用而浪费了。在红黑树中，每个节点的儿子指针分为：红色和黑色两种。在本文中：</p>
<p>1）、红色指针：红色节点表示从父节点指向该节点的指针为红色指针。红色指针用虚线表示；</p>
<p>2）、黑色指针：黑色节点表示从父节点指向该节点的指针为黑色指针。黑色指针用实线表示；</p>
<p>红黑树是2-3-4树的二叉树表示，因此我们来看一下2-3-4树到红黑树的转变过程：</p>
<ul>
<li><strong>2-3-4树种的2节点</strong>：把一个2节点p表示为一个红黑树节点q。红黑树该节点左右子节点均为黑色；</li>
</ul>
<p><img src="/uploads/two_three_four_red_black/29.png" alt=""></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">q.data = p.data_l;</div><div class="line">q-&gt;left_child = p-&gt;left_child;</div><div class="line">q-&gt;right_child = p-&gt;left_mid_child;</div></pre></td></tr></table></figure>
<ul>
<li><strong>2-3-4树种的3节点</strong>：把一个3节点表示为2个红黑树节点，其中一个节点作为另一个节点的子节点。并且子节点为红色；</li>
</ul>
<p><img src="/uploads/two_three_four_red_black/30.png" alt=""></p>
<ul>
<li><strong>2-3-4树种的4节点</strong>：把一个4节点表示为3个红黑树节点，其中data_m所在节点为父节点，左右子节点用红色表示；</li>
</ul>
<p><img src="/uploads/two_three_four_red_black/31.png" alt=""></p>
<p>下面是将上面2-3-4树转换成红黑树的例子：</p>
<p><img src="/uploads/two_three_four_red_black/32.png" alt=""></p>
<h3 id="红黑树性质"><a href="#红黑树性质" class="headerlink" title="红黑树性质"></a>红黑树性质</h3><p>我们从上面一节得出的红黑树，可以知道红黑树具有如下性质：</p>
<ul>
<li>1）、红黑树是一颗二叉查找树；</li>
<li>2）、根节点为黑色节点；</li>
<li>3）、所有根节点到外部节点的路径上黑色指针个数相同（同样的黑色节点也相同）。这是因为在2-3-4树中所有外部节点都位于同一层，而在该树种指针都是黑色指针；</li>
<li>4）、任何从根节点到外部节点的路径上都不存在两个连续的红色指针；</li>
</ul>
<p>下面是红黑树大致的结构：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">typedef struct red_black_tree* red_black_ptr;</div><div class="line">typedef struct red_black_tree &#123;</div><div class="line">        element data;</div><div class="line">        /// 左右儿子</div><div class="line">        red_black_ptr left_child;</div><div class="line">        red_black_ptr right_child;</div><div class="line">        /// 两个颜色域</div><div class="line">        color left_color;</div><div class="line">        color right_color;</div><div class="line">&#125;red_black;</div></pre></td></tr></table></figure>
<h3 id="红黑树的插入"><a href="#红黑树的插入" class="headerlink" title="红黑树的插入"></a>红黑树的插入</h3><p>红黑树的插入可以按照两种方式：自顶向下（Top-To-Down），自底向上（Down-To-Top）。自顶向下只需从根到叶节点一次扫描即可；而自底向上需要从根节点到叶节点扫描之后，还需要继续从叶节点到根节点扫描一次。</p>
<h4 id="👻🍄👻自顶向下的插入"><a href="#👻🍄👻自顶向下的插入" class="headerlink" title="👻🍄👻自顶向下的插入"></a>👻🍄👻自顶向下的插入</h4><p>通过观察当前节点的两个颜色域是否都为红色。如果都为红色，那么该节点对应2-3-4树中的4节点（详细可以看上面2-3-4树到红黑树的转换过程）。当发现4节点时：</p>
<ul>
<li>第一步、将该节点的两个颜色域都变为黑色（由红变黑）；</li>
</ul>
<p><img src="/uploads/two_three_four_red_black/33.png" alt=""></p>
<ul>
<li>第二步、如果该节点是其父节点的左儿子、或者右儿子，则将其父节点的左颜色域、或者右颜色域变为红色；</li>
</ul>
<p><img src="/uploads/two_three_four_red_black/34.png" alt=""></p>
<ul>
<li>第三步、如果此时树中出现两个连续的红色指针时，则需要类似AVL树的LL、LR、RL、RR旋转操作；</li>
</ul>
<p><img src="/uploads/two_three_four_red_black/35.png" alt=""></p>
<p>由于前面有了2-3-4树的基础知识，我们以2-3-4树的2节点、3节点、4节点，来总结红黑树插入时旋转和变色的规律：</p>
<p>每插入一个元素时，我们自顶向下遍历每一个节点:</p>
<p>1）、如果是2节点、或者3节点，则保持它们性质不发生改变（至于怎么判断红黑树中当前节点是2节点，还是3节点。请看“从2-3-4树到红黑树”一节）；</p>
<p><strong>变色</strong></p>
<p>2）、如果当前节点是4节点时（红黑树中其左右指针必定指向红色节点），则将其左右指针和左右子节点变为黑色。这里是将当前4节点作为父节点而言的；</p>
<p>3）、如果当前节点是4节点时，并且该节点作为其父节点左子节点、或者右子节点，那么将其父节点对应的左指针或者右指针变为红色，并且当前节点也变为红色；<br>这里是将该节点作为其父节点的子结点而言的。</p>
<p><strong>旋转</strong></p>
<p>4）、如果出现连续两个红色指针时，就需要做对应的旋转操作；</p>
<h4 id="红黑树插入实例例一："><a href="#红黑树插入实例例一：" class="headerlink" title="红黑树插入实例例一："></a>红黑树插入实例例一：</h4><p>下面先来看一个最简单的例子，我们一次将1，2，3，4，5，6，7，8 插入到红黑树中：</p>
<p><img src="/uploads/two_three_four_red_black/36.png" alt=""></p>
<p>自顶向下的插入过程，是在从根节点到需要插入的目的节点开始进行遍历，并且在遍历过程中对红黑树进行变色和旋转。</p>
<h4 id="自底向上插入"><a href="#自底向上插入" class="headerlink" title="自底向上插入"></a>自底向上插入</h4><p>自底向上的插入，首先需要查找关键字在红黑树的插入位置。显然这个插入操作是不成功的查找，且在该 <strong>向下查找过程中不需要进行旋转变换，只需要将待插元素作为最后遇到的节点的某个子节点，并用红色指针将其与它父节点连接</strong> 。</p>
<p>由于每次以红色指针插入，所以此时所有根节点到外部节点路径上黑色节点的数量相同，但有可能存在两个连续红色指针。</p>
<h4 id="出现两个连续的红色指针时"><a href="#出现两个连续的红色指针时" class="headerlink" title="出现两个连续的红色指针时"></a>出现两个连续的红色指针时</h4><p>假设连续出现的两个红色指针分别为 <p,q> 和 <q,r> 。 这表示q作为p的子节点，r作为q的子节点： p —&gt; q —&gt; r；因此p、q、r之间存在四种情况：</q,r></p,q></p>
<p>1）、<strong>LL</strong>: q作为p的左子节点，r作为q的左子节点；</p>
<p>2）、<strong>LR</strong>: q作为p的左子节点，r作为q的右子节点；</p>
<p>3）、<strong>RL</strong>: q作为p的右子节点，r作为q的左子节点；</p>
<p>4）、<strong>RR</strong>: q作为p的右子节点，r作为q的右子节点；</p>
<p>现在假设s作为q的兄弟（如果s不为空，即存在兄弟节点），</p>
<h4 id="变色"><a href="#变色" class="headerlink" title="变色"></a>变色</h4><p>当s节点（q的兄弟节点）为红色节点时需要做变色操作：</p>
<p><img src="/uploads/two_three_four_red_black/37.png" alt=""></p>
<p>节点p变为红色节点；节点q，s变为黑色节点；节点r不变。这样做变色操作可能会导致红色指针冲突沿着树向上传播，所以颜色调整过程需要多次重复。</p>
<blockquote>
<p><strong>颜色调整不会影响从根节点到外部节点路径上黑色指针的个数</strong>；</p>
</blockquote>
<h4 id="旋转-1"><a href="#旋转-1" class="headerlink" title="旋转"></a>旋转</h4><p>当出现连续两个红色指针，并且节点s为黑色节点时，此时需要做旋转操作。</p>
<p><img src="/uploads/two_three_four_red_black/38.png" alt=""></p>
<blockquote>
<p><strong>旋转操作不会引起红色指针冲突的传播，因此最多只需要执行一次旋转操作</strong>；</p>
</blockquote>
<h4 id="红黑树插入实例例二："><a href="#红黑树插入实例例二：" class="headerlink" title="红黑树插入实例例二："></a>红黑树插入实例例二：</h4><p>现在使用自底向上的方式按顺序插入元素10，9，8，7，6，5，4，3：</p>
<p><img src="/uploads/two_three_four_red_black/39.png" alt=""></p>
<p>1）、插入节点颜色为红色；</p>
<p>2）、节点s为红色时，并且q和r为两个连续的红色节点，此时则需要变色；</p>
<p>3）、如果节点s为黑色，或者为空。当q和r为两个连续红色节点时，此时只需要旋转即可；</p>
<h4 id="自顶向下和自底向上的总结"><a href="#自顶向下和自底向上的总结" class="headerlink" title="自顶向下和自底向上的总结"></a>自顶向下和自底向上的总结</h4><p>1）、对于自顶向下的插入方法，需要执行O(logN)次旋转操作；而自底向上的插入方法只需要执行一次旋转操作；</p>
<p>2）、两种方式都需要执行O(logN)颜色调整操作；</p>
<p>使用自底向上的插入方式就和网上大部分提到的红黑树操作方式一样。但我们还是需要知道自顶向下的操作方式。</p>
<h3 id="红黑树的删除"><a href="#红黑树的删除" class="headerlink" title="红黑树的删除"></a>红黑树的删除</h3><p>其实讲到这里，红黑树已经没有什么讲的必要了。只需要套用2-3-4树的删除节点策略即可。最主要的是在自顶向下扫描的过程中，明确当前红黑树节点处于对应2-3-4树节点的类型。</p>
<p>扫描过程：</p>
<ul>
<li><p>1）、尚未命中待删除元素时，则以二叉树大小关系，去寻找合适的左右子树；</p>
</li>
<li><p>2）、命中待删除元素时，如果元素所处节点为叶子节点。那么直接删除即可；</p>
</li>
<li><p>3）、命中待删除元素时，如果元素所处节点不是叶子节点，此时我们可以像2-3树/2-3-4树的规则继续向下寻找叶子节点。寻找的目标可以是命中节点的左子树中最大子节点，或者右子树中最小子节点；</p>
</li>
</ul>
<p>明确节点类型：</p>
<ul>
<li><p>1）、如果当前节点是红色节点，那么该节点一定对应于2-3-4树中的3节点、或者4节点；<br><strong>由于2-3-4树中，3节点和4节点无需变换直接向下继续遍历即可</strong>；</p>
</li>
<li><p>2）、如果当前节点是黑色节点，那么再去查看该节点左右子节点是否存在红色节点。<br>如果没有红色节点，那么该节点即对应2-3-4树中的2节点。此时则需要看该节点相邻子树的情况，进行对应2节点到4节点的变换（具体变换过程见2-3-4树的删除一节）。</p>
</li>
</ul>
<p>下面是一个具体的例子，在这个例子中我将要删除元素80：<br><img src="/uploads/two_three_four_red_black/40.png" alt=""></p>
<h2 id="源代码"><a href="#源代码" class="headerlink" title="源代码"></a>源代码</h2><p>由于需要写的代码太多了，而且我又比较懒。所以我就写了一下2-3树的增加、删除等相关操作，我将代码全部贴在这里，也可以直接去<a href="https://github.com/wangwangok/two_three_tree" target="_blank" rel="external">Github</a>上查看源代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div><div class="line">337</div><div class="line">338</div><div class="line">339</div><div class="line">340</div><div class="line">341</div><div class="line">342</div><div class="line">343</div><div class="line">344</div><div class="line">345</div><div class="line">346</div><div class="line">347</div><div class="line">348</div><div class="line">349</div><div class="line">350</div><div class="line">351</div><div class="line">352</div><div class="line">353</div><div class="line">354</div><div class="line">355</div><div class="line">356</div><div class="line">357</div><div class="line">358</div><div class="line">359</div><div class="line">360</div><div class="line">361</div><div class="line">362</div><div class="line">363</div><div class="line">364</div><div class="line">365</div><div class="line">366</div><div class="line">367</div><div class="line">368</div><div class="line">369</div><div class="line">370</div><div class="line">371</div><div class="line">372</div><div class="line">373</div><div class="line">374</div><div class="line">375</div><div class="line">376</div><div class="line">377</div><div class="line">378</div><div class="line">379</div><div class="line">380</div><div class="line">381</div><div class="line">382</div><div class="line">383</div><div class="line">384</div><div class="line">385</div><div class="line">386</div><div class="line">387</div><div class="line">388</div><div class="line">389</div><div class="line">390</div><div class="line">391</div><div class="line">392</div><div class="line">393</div><div class="line">394</div><div class="line">395</div><div class="line">396</div><div class="line">397</div><div class="line">398</div><div class="line">399</div><div class="line">400</div><div class="line">401</div><div class="line">402</div><div class="line">403</div><div class="line">404</div><div class="line">405</div><div class="line">406</div><div class="line">407</div><div class="line">408</div><div class="line">409</div><div class="line">410</div><div class="line">411</div><div class="line">412</div><div class="line">413</div><div class="line">414</div><div class="line">415</div><div class="line">416</div><div class="line">417</div><div class="line">418</div><div class="line">419</div><div class="line">420</div><div class="line">421</div><div class="line">422</div><div class="line">423</div><div class="line">424</div><div class="line">425</div><div class="line">426</div><div class="line">427</div><div class="line">428</div><div class="line">429</div><div class="line">430</div><div class="line">431</div><div class="line">432</div><div class="line">433</div><div class="line">434</div><div class="line">435</div><div class="line">436</div><div class="line">437</div><div class="line">438</div><div class="line">439</div><div class="line">440</div><div class="line">441</div><div class="line">442</div><div class="line">443</div><div class="line">444</div><div class="line">445</div><div class="line">446</div><div class="line">447</div><div class="line">448</div><div class="line">449</div><div class="line">450</div><div class="line">451</div><div class="line">452</div><div class="line">453</div><div class="line">454</div><div class="line">455</div><div class="line">456</div><div class="line">457</div><div class="line">458</div><div class="line">459</div><div class="line">460</div><div class="line">461</div><div class="line">462</div><div class="line">463</div><div class="line">464</div><div class="line">465</div><div class="line">466</div><div class="line">467</div><div class="line">468</div><div class="line">469</div><div class="line">470</div><div class="line">471</div><div class="line">472</div><div class="line">473</div><div class="line">474</div><div class="line">475</div><div class="line">476</div><div class="line">477</div><div class="line">478</div><div class="line">479</div><div class="line">480</div><div class="line">481</div><div class="line">482</div><div class="line">483</div><div class="line">484</div><div class="line">485</div><div class="line">486</div><div class="line">487</div><div class="line">488</div><div class="line">489</div><div class="line">490</div><div class="line">491</div><div class="line">492</div><div class="line">493</div><div class="line">494</div><div class="line">495</div><div class="line">496</div><div class="line">497</div><div class="line">498</div><div class="line">499</div><div class="line">500</div><div class="line">501</div><div class="line">502</div><div class="line">503</div><div class="line">504</div><div class="line">505</div><div class="line">506</div><div class="line">507</div><div class="line">508</div><div class="line">509</div><div class="line">510</div><div class="line">511</div><div class="line">512</div><div class="line">513</div><div class="line">514</div><div class="line">515</div><div class="line">516</div><div class="line">517</div><div class="line">518</div><div class="line">519</div><div class="line">520</div><div class="line">521</div><div class="line">522</div><div class="line">523</div><div class="line">524</div><div class="line">525</div><div class="line">526</div><div class="line">527</div><div class="line">528</div><div class="line">529</div><div class="line">530</div><div class="line">531</div><div class="line">532</div><div class="line">533</div><div class="line">534</div><div class="line">535</div><div class="line">536</div><div class="line">537</div><div class="line">538</div><div class="line">539</div><div class="line">540</div><div class="line">541</div><div class="line">542</div><div class="line">543</div><div class="line">544</div><div class="line">545</div><div class="line">546</div><div class="line">547</div><div class="line">548</div><div class="line">549</div><div class="line">550</div><div class="line">551</div><div class="line">552</div><div class="line">553</div><div class="line">554</div><div class="line">555</div><div class="line">556</div><div class="line">557</div><div class="line">558</div><div class="line">559</div><div class="line">560</div><div class="line">561</div><div class="line">562</div><div class="line">563</div><div class="line">564</div><div class="line">565</div><div class="line">566</div><div class="line">567</div><div class="line">568</div><div class="line">569</div><div class="line">570</div><div class="line">571</div><div class="line">572</div><div class="line">573</div><div class="line">574</div><div class="line">575</div><div class="line">576</div><div class="line">577</div><div class="line">578</div><div class="line">579</div><div class="line">580</div><div class="line">581</div><div class="line">582</div><div class="line">583</div><div class="line">584</div><div class="line">585</div><div class="line">586</div><div class="line">587</div><div class="line">588</div><div class="line">589</div><div class="line">590</div><div class="line">591</div><div class="line">592</div><div class="line">593</div><div class="line">594</div><div class="line">595</div><div class="line">596</div><div class="line">597</div><div class="line">598</div><div class="line">599</div><div class="line">600</div><div class="line">601</div><div class="line">602</div><div class="line">603</div><div class="line">604</div><div class="line">605</div><div class="line">606</div><div class="line">607</div><div class="line">608</div><div class="line">609</div><div class="line">610</div><div class="line">611</div><div class="line">612</div><div class="line">613</div><div class="line">614</div><div class="line">615</div><div class="line">616</div><div class="line">617</div><div class="line">618</div><div class="line">619</div><div class="line">620</div><div class="line">621</div><div class="line">622</div><div class="line">623</div><div class="line">624</div><div class="line">625</div><div class="line">626</div><div class="line">627</div><div class="line">628</div><div class="line">629</div><div class="line">630</div><div class="line">631</div><div class="line">632</div><div class="line">633</div><div class="line">634</div><div class="line">635</div><div class="line">636</div><div class="line">637</div><div class="line">638</div><div class="line">639</div><div class="line">640</div><div class="line">641</div><div class="line">642</div><div class="line">643</div><div class="line">644</div><div class="line">645</div><div class="line">646</div><div class="line">647</div><div class="line">648</div><div class="line">649</div><div class="line">650</div><div class="line">651</div><div class="line">652</div><div class="line">653</div><div class="line">654</div><div class="line">655</div><div class="line">656</div><div class="line">657</div><div class="line">658</div><div class="line">659</div><div class="line">660</div><div class="line">661</div><div class="line">662</div><div class="line">663</div><div class="line">664</div><div class="line">665</div><div class="line">666</div><div class="line">667</div><div class="line">668</div><div class="line">669</div><div class="line">670</div><div class="line">671</div><div class="line">672</div><div class="line">673</div><div class="line">674</div><div class="line">675</div><div class="line">676</div><div class="line">677</div><div class="line">678</div><div class="line">679</div><div class="line">680</div><div class="line">681</div><div class="line">682</div><div class="line">683</div><div class="line">684</div><div class="line">685</div><div class="line">686</div><div class="line">687</div><div class="line">688</div><div class="line">689</div><div class="line">690</div><div class="line">691</div><div class="line">692</div><div class="line">693</div><div class="line">694</div><div class="line">695</div><div class="line">696</div><div class="line">697</div><div class="line">698</div><div class="line">699</div><div class="line">700</div><div class="line">701</div><div class="line">702</div><div class="line">703</div><div class="line">704</div><div class="line">705</div><div class="line">706</div><div class="line">707</div><div class="line">708</div><div class="line">709</div><div class="line">710</div><div class="line">711</div><div class="line">712</div><div class="line">713</div><div class="line">714</div><div class="line">715</div><div class="line">716</div><div class="line">717</div><div class="line">718</div><div class="line">719</div><div class="line">720</div><div class="line">721</div><div class="line">722</div><div class="line">723</div><div class="line">724</div><div class="line">725</div><div class="line">726</div><div class="line">727</div><div class="line">728</div><div class="line">729</div><div class="line">730</div><div class="line">731</div><div class="line">732</div><div class="line">733</div><div class="line">734</div><div class="line">735</div><div class="line">736</div><div class="line">737</div><div class="line">738</div><div class="line">739</div><div class="line">740</div><div class="line">741</div><div class="line">742</div><div class="line">743</div><div class="line">744</div><div class="line">745</div><div class="line">746</div><div class="line">747</div><div class="line">748</div><div class="line">749</div><div class="line">750</div><div class="line">751</div><div class="line">752</div><div class="line">753</div><div class="line">754</div><div class="line">755</div><div class="line">756</div><div class="line">757</div><div class="line">758</div><div class="line">759</div><div class="line">760</div><div class="line">761</div><div class="line">762</div><div class="line">763</div><div class="line">764</div><div class="line">765</div><div class="line">766</div><div class="line">767</div><div class="line">768</div><div class="line">769</div><div class="line">770</div><div class="line">771</div><div class="line">772</div><div class="line">773</div><div class="line">774</div><div class="line">775</div><div class="line">776</div><div class="line">777</div><div class="line">778</div><div class="line">779</div><div class="line">780</div><div class="line">781</div><div class="line">782</div><div class="line">783</div><div class="line">784</div><div class="line">785</div><div class="line">786</div><div class="line">787</div><div class="line">788</div><div class="line">789</div><div class="line">790</div><div class="line">791</div><div class="line">792</div><div class="line">793</div><div class="line">794</div><div class="line">795</div><div class="line">796</div><div class="line">797</div><div class="line">798</div><div class="line">799</div><div class="line">800</div><div class="line">801</div><div class="line">802</div><div class="line">803</div><div class="line">804</div><div class="line">805</div><div class="line">806</div><div class="line">807</div><div class="line">808</div><div class="line">809</div><div class="line">810</div><div class="line">811</div><div class="line">812</div><div class="line">813</div><div class="line">814</div><div class="line">815</div><div class="line">816</div><div class="line">817</div><div class="line">818</div><div class="line">819</div><div class="line">820</div><div class="line">821</div><div class="line">822</div><div class="line">823</div><div class="line">824</div><div class="line">825</div><div class="line">826</div><div class="line">827</div><div class="line">828</div><div class="line">829</div><div class="line">830</div><div class="line">831</div><div class="line">832</div><div class="line">833</div><div class="line">834</div><div class="line">835</div><div class="line">836</div><div class="line">837</div><div class="line">838</div><div class="line">839</div><div class="line">840</div><div class="line">841</div><div class="line">842</div><div class="line">843</div><div class="line">844</div><div class="line">845</div><div class="line">846</div><div class="line">847</div><div class="line">848</div><div class="line">849</div><div class="line">850</div><div class="line">851</div><div class="line">852</div><div class="line">853</div><div class="line">854</div><div class="line">855</div><div class="line">856</div><div class="line">857</div><div class="line">858</div><div class="line">859</div><div class="line">860</div><div class="line">861</div><div class="line">862</div><div class="line">863</div><div class="line">864</div><div class="line">865</div><div class="line">866</div><div class="line">867</div><div class="line">868</div><div class="line">869</div><div class="line">870</div><div class="line">871</div><div class="line">872</div><div class="line">873</div><div class="line">874</div><div class="line">875</div><div class="line">876</div><div class="line">877</div><div class="line">878</div><div class="line">879</div><div class="line">880</div><div class="line">881</div><div class="line">882</div><div class="line">883</div><div class="line">884</div><div class="line">885</div><div class="line">886</div><div class="line">887</div><div class="line">888</div><div class="line">889</div><div class="line">890</div><div class="line">891</div><div class="line">892</div><div class="line">893</div><div class="line">894</div><div class="line">895</div><div class="line">896</div><div class="line">897</div><div class="line">898</div><div class="line">899</div><div class="line">900</div><div class="line">901</div><div class="line">902</div><div class="line">903</div><div class="line">904</div><div class="line">905</div><div class="line">906</div><div class="line">907</div><div class="line">908</div><div class="line">909</div><div class="line">910</div><div class="line">911</div><div class="line">912</div><div class="line">913</div><div class="line">914</div><div class="line">915</div><div class="line">916</div><div class="line">917</div><div class="line">918</div><div class="line">919</div><div class="line">920</div><div class="line">921</div><div class="line">922</div><div class="line">923</div><div class="line">924</div><div class="line">925</div><div class="line">926</div><div class="line">927</div><div class="line">928</div><div class="line">929</div><div class="line">930</div><div class="line">931</div><div class="line">932</div><div class="line">933</div><div class="line">934</div><div class="line">935</div><div class="line">936</div><div class="line">937</div><div class="line">938</div><div class="line">939</div><div class="line">940</div><div class="line">941</div></pre></td><td class="code"><pre><div class="line">#include &lt;iostream&gt;</div><div class="line">#include &lt;stdio.h&gt;</div><div class="line">#include &lt;list&gt;</div><div class="line">#include &lt;stdlib.h&gt;</div><div class="line">#include &lt;cstdlib&gt;</div><div class="line">#include &lt;algorithm&gt;</div><div class="line">#include &lt;ctime&gt;</div><div class="line">#include &lt;set&gt;</div><div class="line">#include &lt;vector&gt;</div><div class="line"></div><div class="line">using namespace std;</div><div class="line">/// 这里假设对于element来说，如果该域值不存在，我们使得element的value部分设置为INT_MAX</div><div class="line">class element &#123;</div><div class="line">private:</div><div class="line">	int value;</div><div class="line">public:</div><div class="line">	element(int val) :value(val) &#123;&#125;</div><div class="line">	element() &#123; value = INT_MAX; &#125;</div><div class="line">	void setValue(int val) &#123;value = val;&#125;</div><div class="line">	int getValue() const &#123; return value; &#125;</div><div class="line"></div><div class="line">	static inline element invalid() &#123;</div><div class="line">		return element(INT_MAX);</div><div class="line">	&#125;</div><div class="line">&#125;;</div><div class="line">bool operator == (const element&amp; lhs,const element&amp; rhs) &#123;</div><div class="line">	return lhs.getValue() == rhs.getValue();</div><div class="line">&#125;</div><div class="line"></div><div class="line">bool operator != (const element&amp; lhs,const element&amp; rhs) &#123;</div><div class="line">	return !(lhs.getValue() == rhs.getValue());</div><div class="line">&#125;</div><div class="line"></div><div class="line">class two_three_tree_node &#123;</div><div class="line">public:</div><div class="line">	element data_l;</div><div class="line">	element data_r;</div><div class="line">	two_three_tree_node* left_child;</div><div class="line">	two_three_tree_node* middle_child;</div><div class="line">	two_three_tree_node* right_child;</div><div class="line">public:</div><div class="line"></div><div class="line">	two_three_tree_node()</div><div class="line">	&#123;</div><div class="line">		data_l = element::invalid();</div><div class="line">		data_r = element::invalid();</div><div class="line">		left_child = NULL;</div><div class="line">		middle_child = NULL;</div><div class="line">		right_child = NULL;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	virtual ~two_three_tree_node()</div><div class="line">	&#123;</div><div class="line">		data_l = element::invalid();</div><div class="line">		data_r = element::invalid();</div><div class="line">		if (left_child != nullptr)</div><div class="line">		&#123;</div><div class="line">			delete left_child;</div><div class="line">		&#125;</div><div class="line">		if (middle_child != nullptr)</div><div class="line">		&#123;</div><div class="line">			delete middle_child;</div><div class="line">		&#125;</div><div class="line">		if (right_child != nullptr)</div><div class="line">		&#123;</div><div class="line">			delete right_child;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">class node_strategy &#123;</div><div class="line">protected:</div><div class="line">	const two_three_tree_node* node;</div><div class="line">	element value;</div><div class="line">public:</div><div class="line">	node_strategy():node(NULL),value(element::invalid()) &#123;</div><div class="line"></div><div class="line">	&#125;</div><div class="line">	virtual void setValue(const element&amp; ele) = 0;</div><div class="line">	virtual void setNode(const two_three_tree_node* nd) = 0;</div><div class="line">	virtual two_three_tree_node* next() = 0;</div><div class="line">	virtual ~node_strategy()</div><div class="line">	&#123;</div><div class="line"></div><div class="line">	&#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">class left_child_strategy:public node_strategy &#123;</div><div class="line">	two_three_tree_node* next() &#123;</div><div class="line">		element data_left = node-&gt;data_l;</div><div class="line">		if (value.getValue() &lt; data_left.getValue()) &#123; return node-&gt;left_child; &#125;</div><div class="line">		return nullptr;</div><div class="line">	&#125;</div><div class="line">	void setValue(const element&amp; ele) &#123;</div><div class="line">		value = ele;</div><div class="line">	&#125;</div><div class="line">	void setNode(const two_three_tree_node* nd) &#123;</div><div class="line">		node = nd;</div><div class="line">	&#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">class middle_child_strategy :public node_strategy &#123;</div><div class="line">	two_three_tree_node* next() &#123;</div><div class="line">		element data_left = node-&gt;data_l;</div><div class="line">		element data_right = node-&gt;data_r;</div><div class="line">		if (value.getValue() &gt; data_left.getValue() &amp;&amp; value.getValue() &lt; data_right.getValue()) &#123; return node-&gt;middle_child; &#125;</div><div class="line">		return nullptr;</div><div class="line">	&#125;</div><div class="line">	void setValue(const element&amp; ele) &#123;</div><div class="line">		value = ele;</div><div class="line">	&#125;</div><div class="line">	void setNode(const two_three_tree_node* nd) &#123;</div><div class="line">		node = nd;</div><div class="line">	&#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">class right_child_strategy :public node_strategy &#123;</div><div class="line">	two_three_tree_node* next() &#123;</div><div class="line">		element data_right = node-&gt;data_r;</div><div class="line">		if (value.getValue() &gt; data_right.getValue()) &#123;</div><div class="line">			return node-&gt;right_child;</div><div class="line">		&#125;</div><div class="line">		return nullptr;</div><div class="line">	&#125;</div><div class="line">	void setValue(const element&amp; ele) &#123;</div><div class="line">		value = ele;</div><div class="line">	&#125;</div><div class="line">	void setNode(const two_three_tree_node* nd) &#123;</div><div class="line">		node = nd;</div><div class="line">	&#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">///#######################################################################################################################</div><div class="line">///#######################################################################################################################</div><div class="line">/// #### 查找</div><div class="line">///#######################################################################################################################</div><div class="line">///#######################################################################################################################</div><div class="line">class search_strategy &#123;</div><div class="line">	two_three_tree_node* root;</div><div class="line">public:</div><div class="line">	search_strategy(two_three_tree_node* rt) &#123;</div><div class="line">		root = rt;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	two_three_tree_node* search(element&amp; ele) &#123;</div><div class="line">		two_three_tree_node* node = root;</div><div class="line">		node_strategy *left = new left_child_strategy();</div><div class="line">		node_strategy *middle = new middle_child_strategy();</div><div class="line">		node_strategy *right = new right_child_strategy();</div><div class="line">		while (node)</div><div class="line">		&#123;</div><div class="line">			if (node-&gt;data_l == ele)</div><div class="line">			&#123;</div><div class="line">				return node;</div><div class="line">			&#125;</div><div class="line">			if (node-&gt;data_r == ele)</div><div class="line">			&#123;</div><div class="line">				return node;</div><div class="line">			&#125;</div><div class="line">			left-&gt;setNode(node);</div><div class="line">			left-&gt;setValue(ele);</div><div class="line">			if (two_three_tree_node *temp = left-&gt;next())</div><div class="line">			&#123;</div><div class="line">				node = temp;</div><div class="line">				continue;</div><div class="line">			&#125;</div><div class="line">			middle-&gt;setNode(node);</div><div class="line">			middle-&gt;setValue(ele);</div><div class="line">			if (two_three_tree_node * temp = middle-&gt;next())</div><div class="line">			&#123;</div><div class="line">				node = temp;</div><div class="line">				continue;</div><div class="line">			&#125;</div><div class="line"></div><div class="line">			right-&gt;setNode(node);</div><div class="line">			right-&gt;setValue(ele);</div><div class="line">			if (two_three_tree_node * temp = right-&gt;next())</div><div class="line">			&#123;</div><div class="line">				node = temp;</div><div class="line">				continue;</div><div class="line">			&#125;</div><div class="line">			node = nullptr;</div><div class="line">		&#125;</div><div class="line">		delete left;</div><div class="line">		delete middle;</div><div class="line">		delete right;</div><div class="line">		return nullptr;</div><div class="line">	&#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">///#######################################################################################################################</div><div class="line">///#######################################################################################################################</div><div class="line">/// #### 插入</div><div class="line">///#######################################################################################################################</div><div class="line">///#######################################################################################################################</div><div class="line">class insert_strategy &#123;</div><div class="line">private:</div><div class="line">	/// 创建一个栈结构，将从叶节点到根节点路径上左右的节点保存下来</div><div class="line">	struct find_stack &#123;</div><div class="line">		struct find_stack_node &#123;</div><div class="line">			two_three_tree_node* tree_node;</div><div class="line">			find_stack_node* next;</div><div class="line">		&#125;;</div><div class="line">		void push(const two_three_tree_node* tree_node) &#123;</div><div class="line">			if (!tree_node)</div><div class="line">			&#123;</div><div class="line">				return;</div><div class="line">			&#125;</div><div class="line">			find_stack_node* node = new find_stack_node();</div><div class="line">			node-&gt;tree_node = const_cast&lt;two_three_tree_node*&gt;(tree_node);</div><div class="line">			node-&gt;next = top;</div><div class="line">			top = node;</div><div class="line">		&#125;</div><div class="line">		two_three_tree_node* pop() &#123;</div><div class="line">			find_stack_node* node = top;</div><div class="line">			top = top-&gt;next;</div><div class="line">			two_three_tree_node* tree_node = node-&gt;tree_node;</div><div class="line">			node-&gt;next = nullptr;</div><div class="line">			node-&gt;tree_node = nullptr;</div><div class="line">			delete node;</div><div class="line">			return tree_node;</div><div class="line">		&#125;</div><div class="line">		find_stack_node* stack_top() &#123;</div><div class="line">			return top;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		~find_stack()</div><div class="line">		&#123;</div><div class="line">			while (top)</div><div class="line">			&#123;</div><div class="line">				pop();</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	private:</div><div class="line">		find_stack_node* top;</div><div class="line">	&#125;;</div><div class="line"></div><div class="line"></div><div class="line">///#######################################################################################################################</div><div class="line">///#######################################################################################################################</div><div class="line">///#####寻找节点</div><div class="line">///#######################################################################################################################</div><div class="line">///#######################################################################################################################</div><div class="line">	class find_element &#123;</div><div class="line">	private:</div><div class="line">		two_three_tree_node* root;</div><div class="line">		element value;</div><div class="line">		find_stack* stack;</div><div class="line">	public:</div><div class="line">		find_element(const two_three_tree_node* rt, element val) &#123;</div><div class="line">			root = const_cast&lt;two_three_tree_node*&gt;(rt);</div><div class="line">			value = val;</div><div class="line">			stack = new find_stack();</div><div class="line">		&#125;</div><div class="line">		void set_value(element val) &#123;</div><div class="line">			value = val;</div><div class="line">		&#125;</div><div class="line">		/// 修改版查找：根据根节点和指定元素：如果查找到指定元素，则认为查找成功，返回null；否则返回查找过程中遇到的叶子节点；</div><div class="line">		two_three_tree_node* node() &#123;</div><div class="line">			two_three_tree_node* node = root;</div><div class="line">			node_strategy* left = new left_child_strategy();</div><div class="line">			node_strategy* middle = new middle_child_strategy();</div><div class="line">			node_strategy* right = new right_child_strategy();</div><div class="line">			two_three_tree_node* result = nullptr;</div><div class="line">			while (node)</div><div class="line">			&#123;</div><div class="line">				stack-&gt;push(node);</div><div class="line">				if (node-&gt;data_l == value)</div><div class="line">				&#123;</div><div class="line">					goto release;</div><div class="line">				&#125;</div><div class="line">				if (node-&gt;data_r == value)</div><div class="line">				&#123;</div><div class="line">					goto release;</div><div class="line">				&#125;</div><div class="line">				left-&gt;setNode(node);</div><div class="line">				left-&gt;setValue(value);</div><div class="line">				if (two_three_tree_node * temp = left-&gt;next())</div><div class="line">				&#123;</div><div class="line">					node = temp;</div><div class="line">					continue;</div><div class="line">				&#125;</div><div class="line">				middle-&gt;setNode(node);</div><div class="line">				middle-&gt;setValue(value);</div><div class="line">				if (two_three_tree_node * temp = middle-&gt;next())</div><div class="line">				&#123;</div><div class="line">					node = temp;</div><div class="line">					continue;</div><div class="line">				&#125;</div><div class="line"></div><div class="line">				right-&gt;setNode(node);</div><div class="line">				right-&gt;setValue(value);</div><div class="line">				if (two_three_tree_node * temp = right-&gt;next())</div><div class="line">				&#123;</div><div class="line">					node = temp;</div><div class="line">					continue;</div><div class="line">				&#125;</div><div class="line">				node = nullptr;</div><div class="line">			&#125;</div><div class="line">			if (stack-&gt;stack_top())</div><div class="line">			&#123;</div><div class="line">				result = stack-&gt;stack_top()-&gt;tree_node;</div><div class="line">			&#125;</div><div class="line">			release:</div><div class="line">			delete left;</div><div class="line">			delete middle;</div><div class="line">			delete right;</div><div class="line">			return result;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		find_stack* get_stack() &#123;</div><div class="line">			return stack;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		~find_element()</div><div class="line">		&#123;</div><div class="line">			root = nullptr;</div><div class="line">			delete stack;</div><div class="line">			stack = nullptr;</div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line"></div><div class="line">	//// 拼接</div><div class="line">	class split_element &#123;</div><div class="line">	private:</div><div class="line">		find_stack* stack;</div><div class="line">		element ele;</div><div class="line">	public:</div><div class="line">		split_element(const find_stack* steck,const element&amp; val) &#123;</div><div class="line">			stack = const_cast&lt;find_stack *&gt;(steck);</div><div class="line">			ele = val;</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		two_three_tree_node* split(bool (*two_node_insert_handle)(two_three_tree_node* node,const two_three_tree_node* insert_node))&#123;</div><div class="line">			find_stack::find_stack_node* top = stack-&gt;stack_top();</div><div class="line">			two_three_tree_node* be_insert_node = new two_three_tree_node();</div><div class="line">			be_insert_node-&gt;data_l = ele;</div><div class="line">			int breakpoint = ele.getValue();</div><div class="line">			while(be_insert_node-&gt;data_l != element::invalid() &amp;&amp; top)&#123;</div><div class="line">				two_three_tree_node* current = top-&gt;tree_node;</div><div class="line">				if (two_node_insert_handle(current, be_insert_node)) &#123;</div><div class="line">					return nullptr;</div><div class="line">				&#125;</div><div class="line">				/// current 存放三个元素里面最小的一个</div><div class="line">				/// max 存放三个元素里面最大的一个</div><div class="line">				two_three_tree_node* max_item = new two_three_tree_node();</div><div class="line">				if (be_insert_node-&gt;data_l.getValue() &lt; current-&gt;data_l.getValue())</div><div class="line">				&#123;</div><div class="line">					max_item-&gt;data_l = current-&gt;data_r;</div><div class="line">					max_item-&gt;data_r = element::invalid();</div><div class="line">					max_item-&gt;left_child = current-&gt;middle_child;</div><div class="line">					max_item-&gt;middle_child = current-&gt;right_child;</div><div class="line"></div><div class="line">					element temp = current-&gt;data_l;</div><div class="line">					current-&gt;data_l = be_insert_node-&gt;data_l;</div><div class="line">					current-&gt;data_r = element::invalid();</div><div class="line">					current-&gt;left_child = be_insert_node-&gt;left_child;</div><div class="line">					current-&gt;middle_child = be_insert_node-&gt;middle_child;</div><div class="line">					current-&gt;right_child = nullptr;</div><div class="line">					</div><div class="line">					be_insert_node-&gt;data_l = temp;</div><div class="line">					be_insert_node-&gt;data_r = element::invalid();</div><div class="line">					be_insert_node-&gt;left_child = current;</div><div class="line">					be_insert_node-&gt;middle_child = max_item;</div><div class="line"></div><div class="line">					top = top-&gt;next;</div><div class="line">					continue;</div><div class="line">				&#125;</div><div class="line"></div><div class="line">				if (be_insert_node-&gt;data_l.getValue() &gt; current-&gt;data_r.getValue()) &#123;</div><div class="line">					max_item-&gt;data_l = be_insert_node-&gt;data_l;</div><div class="line">					max_item-&gt;data_r = element::invalid();</div><div class="line">					max_item-&gt;left_child = be_insert_node-&gt;left_child;</div><div class="line">					max_item-&gt;middle_child = be_insert_node-&gt;middle_child;</div><div class="line"></div><div class="line">					current-&gt;right_child = nullptr;</div><div class="line">					element temp = current-&gt;data_r;</div><div class="line">					current-&gt;data_r = element::invalid();</div><div class="line"></div><div class="line">					be_insert_node-&gt;data_l = temp;</div><div class="line">					be_insert_node-&gt;left_child = current;</div><div class="line">					be_insert_node-&gt;middle_child = max_item;</div><div class="line">					be_insert_node-&gt;data_r = element::invalid();</div><div class="line"></div><div class="line">					top = top-&gt;next;</div><div class="line">					continue;</div><div class="line">				&#125;</div><div class="line"></div><div class="line">				if (be_insert_node-&gt;data_l.getValue() &lt; current-&gt;data_r.getValue() &amp;&amp; be_insert_node-&gt;data_l.getValue() &gt; current-&gt;data_l.getValue()) &#123;</div><div class="line">					max_item-&gt;data_l = current-&gt;data_r;</div><div class="line">					max_item-&gt;left_child = be_insert_node-&gt;middle_child;</div><div class="line">					max_item-&gt;middle_child = current-&gt;right_child;</div><div class="line">					max_item-&gt;data_r = element::invalid();</div><div class="line"></div><div class="line">					current-&gt;middle_child = be_insert_node-&gt;left_child;</div><div class="line">					current-&gt;data_r = element::invalid();</div><div class="line">					current-&gt;right_child = nullptr;</div><div class="line"></div><div class="line">					be_insert_node-&gt;left_child = current;</div><div class="line">					be_insert_node-&gt;middle_child = max_item;</div><div class="line">					be_insert_node-&gt;right_child = nullptr;</div><div class="line">					be_insert_node-&gt;data_r = element::invalid();</div><div class="line"></div><div class="line">					top = top-&gt;next;</div><div class="line">					continue;</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">			return be_insert_node;</div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line"></div><div class="line">	static bool two_node_insert(two_three_tree_node* node, const two_three_tree_node* insert_node) &#123;</div><div class="line">		if (node-&gt;data_r != element::invalid())</div><div class="line">		&#123;</div><div class="line">			return false;</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		if (node-&gt;data_l.getValue() &lt; const_cast&lt;two_three_tree_node*&gt;(insert_node)-&gt;data_l.getValue())</div><div class="line">		&#123;</div><div class="line">			node-&gt;data_r = insert_node-&gt;data_l;</div><div class="line">			node-&gt;middle_child = insert_node-&gt;left_child;</div><div class="line">			node-&gt;right_child = insert_node-&gt;middle_child;</div><div class="line">		&#125;</div><div class="line">		else</div><div class="line">		&#123;</div><div class="line">			element temp = node-&gt;data_l;</div><div class="line">			node-&gt;data_l = insert_node-&gt;data_l;</div><div class="line">			node-&gt;data_r = temp;</div><div class="line">			node-&gt;right_child = node-&gt;middle_child;</div><div class="line">			node-&gt;left_child = insert_node-&gt;left_child;</div><div class="line">			node-&gt;middle_child = insert_node-&gt;middle_child;</div><div class="line">		&#125;</div><div class="line">		return true;</div><div class="line">	&#125;</div><div class="line">public:</div><div class="line"></div><div class="line">	two_three_tree_node* insert(two_three_tree_node* root ,const element &amp;ele) &#123;</div><div class="line">		find_element* fele = new find_element(root,ele);</div><div class="line">		two_three_tree_node* leaf = fele-&gt;node();</div><div class="line">		if (nullptr == leaf)</div><div class="line">		&#123;/// 待插入元素已存在于树中</div><div class="line">			delete fele;</div><div class="line">			return root;</div><div class="line">		&#125;</div><div class="line">		split_element* se = new split_element(fele-&gt;get_stack(), ele);</div><div class="line">		two_three_tree_node* root_node = se-&gt;split(two_node_insert);</div><div class="line">		if (root_node == nullptr) &#123;/// 2节点</div><div class="line">			delete fele;</div><div class="line">			return root;</div><div class="line">		&#125;</div><div class="line">		/// 3节点</div><div class="line">		delete fele;</div><div class="line">		return root_node;</div><div class="line">	&#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">///#######################################################################################################################</div><div class="line">///#######################################################################################################################</div><div class="line">/// #### 删除</div><div class="line">///#######################################################################################################################</div><div class="line">///#######################################################################################################################</div><div class="line">class delete_strategy &#123;</div><div class="line">	two_three_tree_node* root;</div><div class="line">	element ele;</div><div class="line">private:</div><div class="line">	/// 获取兄弟节点;</div><div class="line">	two_three_tree_node* get_bro_node(two_three_tree_node * const node, two_three_tree_node * const parent) &#123;</div><div class="line">		if (node == parent-&gt;left_child)</div><div class="line">		&#123;</div><div class="line">			return parent-&gt;middle_child;</div><div class="line">		&#125;</div><div class="line">		if (node == parent-&gt;middle_child)</div><div class="line">		&#123;</div><div class="line">			if (is_three_node(parent-&gt;right_child))</div><div class="line">			&#123;</div><div class="line">				return parent-&gt;right_child;</div><div class="line">			&#125;</div><div class="line">			return parent-&gt;left_child;</div><div class="line">		&#125;</div><div class="line">		if (node == parent-&gt;right_child) </div><div class="line">		&#123;</div><div class="line">			return parent-&gt;middle_child;</div><div class="line">		&#125;</div><div class="line">		return nullptr;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">protected:</div><div class="line">	static inline bool is_three_node(two_three_tree_node* node) &#123;</div><div class="line">		if (nullptr == node)</div><div class="line">		&#123;</div><div class="line">			return false;</div><div class="line">		&#125;</div><div class="line">		if (node-&gt;data_l != element::invalid() &amp;&amp; node-&gt;data_r != element::invalid())</div><div class="line">		&#123;</div><div class="line">			return true;</div><div class="line">		&#125;</div><div class="line">		return false;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	static bool remove_element(two_three_tree_node* node, element ele) &#123;</div><div class="line">		if (node-&gt;data_r == ele)</div><div class="line">		&#123;</div><div class="line">			node-&gt;data_r = element::invalid();</div><div class="line">			return true;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		if (node-&gt;data_l == ele) &#123;</div><div class="line">			node-&gt;data_l = node-&gt;data_r;</div><div class="line">			node-&gt;data_r = element::invalid();</div><div class="line">			return true;</div><div class="line">		&#125;</div><div class="line">		return false;</div><div class="line">	&#125;</div><div class="line">	class delete_ttt_node &#123;</div><div class="line">	public:</div><div class="line">		two_three_tree_node* node;</div><div class="line">		element* isptr;</div><div class="line"></div><div class="line">		delete_ttt_node(const two_three_tree_node* rt, const element* is) &#123;</div><div class="line">			node = const_cast&lt;two_three_tree_node*&gt;(rt);</div><div class="line">			isptr = const_cast&lt;element*&gt;(is);</div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line">	/// 叶节点转移</div><div class="line">	class leaf_swap &#123;</div><div class="line">		delete_ttt_node* ttt_node;</div><div class="line">		element ele;</div><div class="line">		/// 返回值为目标节点</div><div class="line">		/// leaf为叶节点</div><div class="line">	private:</div><div class="line">		two_three_tree_node* leaf_node;</div><div class="line">		two_three_tree_node* leaf_parent_node;</div><div class="line">	public:</div><div class="line">		leaf_swap(const two_three_tree_node* rt, element&amp; el) &#123;</div><div class="line">			ttt_node = new delete_ttt_node(rt, nullptr);</div><div class="line">			ele = el;</div><div class="line">			leaf_node = nullptr;</div><div class="line">			leaf_parent_node = nullptr;</div><div class="line">		&#125;</div><div class="line">		leaf_swap() &#123;</div><div class="line">			ttt_node = new delete_ttt_node(nullptr, nullptr);</div><div class="line">			ele = element::invalid();</div><div class="line">			leaf_node = nullptr;</div><div class="line">			leaf_parent_node = nullptr;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		~leaf_swap()</div><div class="line">		&#123;</div><div class="line">			delete ttt_node;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		two_three_tree_node* get_leaf_node() &#123;</div><div class="line">			return leaf_node;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		two_three_tree_node* get_leaf_parent_node() &#123;</div><div class="line">			return leaf_parent_node;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		delete_ttt_node* get_swap_info(two_three_tree_node** leaf) &#123;</div><div class="line">			two_three_tree_node* node = ttt_node-&gt;node;</div><div class="line">			delete_ttt_node* des_node = new delete_ttt_node(ttt_node-&gt;node, nullptr);</div><div class="line">			node_strategy* left = new left_child_strategy();</div><div class="line">			node_strategy* middle = new middle_child_strategy();</div><div class="line">			node_strategy* right = new right_child_strategy();</div><div class="line">			/// 命中待删除元素</div><div class="line">			while (node)</div><div class="line">			&#123;</div><div class="line">				if (node-&gt;data_l == ele)</div><div class="line">				&#123;</div><div class="line">					des_node-&gt;node = node;</div><div class="line">					des_node-&gt;isptr = &amp;(node-&gt;data_l);</div><div class="line">					break;</div><div class="line">				&#125;</div><div class="line">				if (node-&gt;data_r == ele)</div><div class="line">				&#123;</div><div class="line">					des_node-&gt;node = node;</div><div class="line">					des_node-&gt;isptr = &amp;(node-&gt;data_r);</div><div class="line">					break;</div><div class="line">				&#125;</div><div class="line">				left-&gt;setNode(node);</div><div class="line">				left-&gt;setValue(ele);</div><div class="line">				if (two_three_tree_node * temp = left-&gt;next())</div><div class="line">				&#123;</div><div class="line">					leaf_parent_node = node;</div><div class="line">					node = temp;</div><div class="line">					continue;</div><div class="line">				&#125;</div><div class="line">				middle-&gt;setNode(node);</div><div class="line">				middle-&gt;setValue(ele);</div><div class="line">				if (two_three_tree_node * temp = middle-&gt;next())</div><div class="line">				&#123;</div><div class="line">					leaf_parent_node = node;</div><div class="line">					node = temp;</div><div class="line">					continue;</div><div class="line">				&#125;</div><div class="line"></div><div class="line">				right-&gt;setNode(node);</div><div class="line">				right-&gt;setValue(ele);</div><div class="line">				if (two_three_tree_node * temp = right-&gt;next())</div><div class="line">				&#123;</div><div class="line">					leaf_parent_node = node;</div><div class="line">					node = temp;</div><div class="line">					continue;</div><div class="line">				&#125;</div><div class="line">				node = nullptr;</div><div class="line">			&#125;</div><div class="line">			delete left;</div><div class="line">			delete middle;</div><div class="line">			delete right;</div><div class="line">			/// 寻找叶子节点</div><div class="line">			/// 左子树的最大子节点；或者右子树的最小子节点；</div><div class="line">			/// 这里我选择左子树的最大子节点；</div><div class="line">			if (des_node == nullptr)</div><div class="line">			&#123;</div><div class="line">				leaf_parent_node = nullptr;</div><div class="line">				return des_node;</div><div class="line">			&#125;</div><div class="line">			*leaf = des_node-&gt;node;</div><div class="line">			</div><div class="line">			for (node = (des_node-&gt;isptr-&gt;getValue() == des_node-&gt;node-&gt;data_r.getValue()) ? des_node-&gt;node-&gt;middle_child : des_node-&gt;node-&gt;left_child;</div><div class="line">				node; </div><div class="line">				node = node-&gt;middle_child)</div><div class="line">			&#123;</div><div class="line">				/// 非叶节点</div><div class="line">				leaf_parent_node = *leaf;</div><div class="line">				*leaf = node;</div><div class="line">			&#125;</div><div class="line">			return des_node;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		bool swap() &#123;/// 仅仅交换两个指针的数据域的值，指针域不做改变</div><div class="line">			two_three_tree_node* leaf = nullptr;</div><div class="line">			delete_ttt_node* des_node = get_swap_info(&amp;leaf);</div><div class="line">			leaf_node = leaf;</div><div class="line">			if (nullptr == des_node || nullptr == leaf)</div><div class="line">			&#123;</div><div class="line">				return false;</div><div class="line">			&#125;</div><div class="line">			if (des_node-&gt;node == leaf)</div><div class="line">			&#123;/// 叶节点，不做交换</div><div class="line">				return true;</div><div class="line">			&#125;</div><div class="line">			if (leaf-&gt;data_r != element::invalid())</div><div class="line">			&#123;</div><div class="line">				element r_temp = leaf-&gt;data_r;</div><div class="line">				leaf-&gt;data_r = *(des_node-&gt;isptr);</div><div class="line">				*(des_node-&gt;isptr) = r_temp;</div><div class="line">			&#125;</div><div class="line">			else </div><div class="line">			&#123;</div><div class="line">				element l_temp = leaf-&gt;data_l;</div><div class="line">				leaf-&gt;data_l = *(des_node-&gt;isptr);</div><div class="line">				*(des_node-&gt;isptr) = l_temp;</div><div class="line">			&#125;</div><div class="line">			delete des_node;</div><div class="line">			return true;</div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line"></div><div class="line">	class two_node_delete_interface &#123;</div><div class="line">	protected:</div><div class="line">		two_three_tree_node* leaf;</div><div class="line">		two_three_tree_node* bro;</div><div class="line">		two_three_tree_node* parent;</div><div class="line">		two_node_delete_interface(two_three_tree_node* lf, two_three_tree_node* bo, two_three_tree_node* pt) :leaf(lf), bro(bo), parent(pt) &#123;&#125;</div><div class="line">		virtual ~two_node_delete_interface()&#123;&#125;</div><div class="line">	&#125;;</div><div class="line">	/// 旋转</div><div class="line">	class rotate : public two_node_delete_interface &#123;/// 兄弟节点为3节点时，旋转</div><div class="line">	private:</div><div class="line">		bool left_leaf_rotate() &#123;</div><div class="line">			leaf-&gt;data_l = parent-&gt;data_l;</div><div class="line">			leaf-&gt;data_r = element::invalid();</div><div class="line"></div><div class="line">			parent-&gt;data_l = bro-&gt;data_l;</div><div class="line"></div><div class="line">			bro-&gt;data_l = bro-&gt;data_r;</div><div class="line">			bro-&gt;data_r = element::invalid();</div><div class="line"></div><div class="line">			leaf-&gt;middle_child = bro-&gt;left_child;</div><div class="line">			bro-&gt;left_child = bro-&gt;middle_child;</div><div class="line">			bro-&gt;middle_child = bro-&gt;right_child;</div><div class="line"></div><div class="line">			return true;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		bool right_leaf_rorate() &#123;</div><div class="line">			leaf-&gt;data_l = parent-&gt;data_l;</div><div class="line">			parent-&gt;data_l = bro-&gt;data_r;</div><div class="line">			leaf-&gt;left_child = bro-&gt;right_child;</div><div class="line">			return true;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		bool middle_leaf_rorate() &#123;</div><div class="line">			if (bro == parent-&gt;right_child) &#123;</div><div class="line">				leaf-&gt;data_l = parent-&gt;data_r;</div><div class="line">				leaf-&gt;data_r = element::invalid();</div><div class="line"></div><div class="line">				parent-&gt;data_r = bro-&gt;data_l;</div><div class="line">				bro-&gt;data_l = bro-&gt;data_r;</div><div class="line">				bro-&gt;data_r = element::invalid();</div><div class="line"></div><div class="line">				leaf-&gt;middle_child = bro-&gt;left_child;</div><div class="line">				bro-&gt;left_child = bro-&gt;middle_child;</div><div class="line">				bro-&gt;middle_child = bro-&gt;right_child;</div><div class="line">				return true;</div><div class="line">			&#125;</div><div class="line">			leaf-&gt;data_l = parent-&gt;data_l;</div><div class="line">			parent-&gt;data_l = bro-&gt;data_r;</div><div class="line">			leaf-&gt;left_child = bro-&gt;right_child;</div><div class="line">			return true;</div><div class="line">		&#125;</div><div class="line">	public:</div><div class="line">		rotate(two_three_tree_node* lf, two_three_tree_node* bo, two_three_tree_node* pt):two_node_delete_interface(lf, bo, pt) &#123;&#125;</div><div class="line">		bool execute() &#123;</div><div class="line">			if (nullptr == leaf || nullptr == parent || nullptr == bro)</div><div class="line">			&#123;</div><div class="line">				return false;</div><div class="line">			&#125;</div><div class="line">			if (leaf == parent-&gt;left_child) </div><div class="line">			&#123;</div><div class="line">				return left_leaf_rotate();</div><div class="line">			&#125;</div><div class="line">			else if (leaf == parent-&gt;middle_child)</div><div class="line">			&#123;</div><div class="line">				return middle_leaf_rorate();</div><div class="line">			&#125;</div><div class="line">			else </div><div class="line">			&#123;</div><div class="line">				return right_leaf_rorate();</div><div class="line">			&#125;</div><div class="line"></div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line"></div><div class="line">	/// 合并</div><div class="line">	class combine : public two_node_delete_interface &#123;</div><div class="line">	protected:</div><div class="line">		bool left_leaf_combine() &#123;</div><div class="line">			if (nullptr == leaf || nullptr == parent || nullptr == bro)</div><div class="line">			&#123;</div><div class="line">				return false;</div><div class="line">			&#125;</div><div class="line">			bool parent_is_three_node = is_three_node(parent);</div><div class="line">			if (false == parent_is_three_node)</div><div class="line">			&#123;</div><div class="line">				parent-&gt;data_r = bro-&gt;data_l;</div><div class="line">				parent-&gt;left_child = leaf-&gt;left_child;</div><div class="line">				parent-&gt;middle_child = bro-&gt;left_child;</div><div class="line">				parent-&gt;right_child = bro-&gt;right_child;</div><div class="line">				delete bro;</div><div class="line">				delete leaf;</div><div class="line">				bro = nullptr;</div><div class="line">				leaf = nullptr;</div><div class="line">				return true;</div><div class="line">			&#125;</div><div class="line">			bro-&gt;data_r = bro-&gt;data_l;</div><div class="line">			bro-&gt;data_l = parent-&gt;data_l;</div><div class="line"></div><div class="line">			parent-&gt;data_l = parent-&gt;data_r;</div><div class="line">			parent-&gt;data_r = element::invalid();</div><div class="line">			parent-&gt;left_child = parent-&gt;middle_child;</div><div class="line">			parent-&gt;middle_child = parent-&gt;right_child;</div><div class="line">			parent-&gt;right_child = nullptr;</div><div class="line"></div><div class="line">			bro-&gt;right_child = bro-&gt;middle_child;</div><div class="line">			bro-&gt;middle_child = bro-&gt;left_child;</div><div class="line">			bro-&gt;left_child = leaf-&gt;left_child;</div><div class="line">			delete leaf;</div><div class="line">			leaf = nullptr;</div><div class="line">			return true;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		bool middle_leaf_combine() &#123;</div><div class="line">			if (nullptr == leaf || nullptr == parent || nullptr == bro)</div><div class="line">			&#123;</div><div class="line">				return false;</div><div class="line">			&#125;</div><div class="line">			bool parent_is_three_node = is_three_node(parent);</div><div class="line">			if (false == parent_is_three_node)</div><div class="line">			&#123;</div><div class="line">				parent-&gt;data_r = parent-&gt;data_l;</div><div class="line">				parent-&gt;data_l = bro-&gt;data_l;</div><div class="line">				parent-&gt;left_child = nullptr;</div><div class="line">				parent-&gt;middle_child = nullptr;</div><div class="line">				delete leaf;</div><div class="line">				delete bro;</div><div class="line">				leaf = nullptr;</div><div class="line">				bro = nullptr;</div><div class="line">				return true;</div><div class="line">			&#125;</div><div class="line">			bro-&gt;data_r = parent-&gt;data_l;</div><div class="line">			parent-&gt;data_l = parent-&gt;data_r;</div><div class="line">			parent-&gt;data_r = element::invalid();</div><div class="line">			parent-&gt;middle_child = parent-&gt;right_child;</div><div class="line">			parent-&gt;right_child = nullptr;</div><div class="line">			bro-&gt;middle_child = leaf-&gt;left_child;</div><div class="line">			bro-&gt;right_child = leaf-&gt;middle_child;</div><div class="line">			delete leaf;</div><div class="line">			leaf = nullptr;</div><div class="line">			return true;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		bool right_leaf_combine() &#123;</div><div class="line">			if (nullptr == leaf || nullptr == parent || nullptr == bro)</div><div class="line">			&#123;</div><div class="line">				return false;</div><div class="line">			&#125;</div><div class="line">			bro-&gt;data_r = parent-&gt;data_r;</div><div class="line">			parent-&gt;data_r = element::invalid();</div><div class="line">			parent-&gt;right_child = nullptr;</div><div class="line">			bro-&gt;middle_child = leaf-&gt;left_child;</div><div class="line">			bro-&gt;right_child = leaf-&gt;middle_child;</div><div class="line">			delete leaf;</div><div class="line">			leaf = nullptr;</div><div class="line">			return true;</div><div class="line">		&#125;</div><div class="line">	public:</div><div class="line">		combine(two_three_tree_node* lf, two_three_tree_node* bo, two_three_tree_node* pt) :two_node_delete_interface(lf, bo, pt) &#123;&#125;</div><div class="line"></div><div class="line">		bool execute() &#123;</div><div class="line">			if (nullptr == leaf || nullptr == parent || nullptr == bro)</div><div class="line">			&#123;</div><div class="line">				return false;</div><div class="line">			&#125;</div><div class="line">			if (leaf == parent-&gt;left_child)</div><div class="line">			&#123;</div><div class="line">				return left_leaf_combine();</div><div class="line">			&#125;</div><div class="line">			else if(leaf == parent-&gt;middle_child)</div><div class="line">			&#123;</div><div class="line">				return middle_leaf_combine();</div><div class="line">			&#125;</div><div class="line">			else</div><div class="line">			&#123;</div><div class="line">				return right_leaf_combine();</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line"></div><div class="line">	class two_node_delete : public two_node_delete_interface &#123;</div><div class="line">	public:</div><div class="line">		two_node_delete(two_three_tree_node* lf, two_three_tree_node* bo, two_three_tree_node* pt):two_node_delete_interface(lf, bo, pt) &#123;&#125;</div><div class="line"></div><div class="line">		bool execute() &#123;</div><div class="line">			if (nullptr == leaf || nullptr == parent || nullptr == bro)</div><div class="line">			&#123;</div><div class="line">				return false;</div><div class="line">			&#125;</div><div class="line">			/// 查看兄弟节点为2节点，还是3节点；</div><div class="line">			bool three_node = is_three_node(bro);</div><div class="line">			if (true == three_node) /// 兄弟节点为3节点，旋转</div><div class="line">			&#123;</div><div class="line">				rotate* rtt = new rotate(leaf, bro, parent);</div><div class="line">				return rtt-&gt;execute();</div><div class="line">			&#125;</div><div class="line">			else  /// 兄弟节点为2节点，合并</div><div class="line">			&#123;</div><div class="line">				combine* cbn = new combine(leaf, bro, parent);</div><div class="line">				return cbn-&gt;execute();</div><div class="line">			&#125;</div><div class="line">			return false;</div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line">public:</div><div class="line">	delete_strategy(const two_three_tree_node*rt, element&amp; el) &#123;</div><div class="line">		root = const_cast&lt;two_three_tree_node*&gt;(rt);</div><div class="line">		ele = el;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	bool execute() &#123;</div><div class="line">		leaf_swap* ls = new leaf_swap(root, ele);</div><div class="line">		bool result = ls-&gt;swap();</div><div class="line">		if (false == result)</div><div class="line">		&#123;</div><div class="line">			return false;</div><div class="line">		&#125;</div><div class="line">		two_three_tree_node* leaf = ls-&gt;get_leaf_node();</div><div class="line">		if (nullptr == leaf)</div><div class="line">		&#123;</div><div class="line">			return false;</div><div class="line">		&#125;</div><div class="line">		two_three_tree_node* leaf_parent = ls-&gt;get_leaf_parent_node();</div><div class="line">		/// 3节点</div><div class="line">		if (is_three_node(leaf))</div><div class="line">		&#123;</div><div class="line">			remove_element(leaf, ele);</div><div class="line">			return true;</div><div class="line">		&#125;</div><div class="line">		/// 2节点</div><div class="line">		two_three_tree_node* bro = get_bro_node(leaf, leaf_parent);</div><div class="line">		if (nullptr == bro)</div><div class="line">		&#123;</div><div class="line">			return false;</div><div class="line">		&#125;</div><div class="line">		two_node_delete* tnd = new two_node_delete(leaf, bro, leaf_parent);</div><div class="line">		tnd-&gt;execute();</div><div class="line">		return result;</div><div class="line">	&#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"></div><div class="line">int main()</div><div class="line">&#123;</div><div class="line">	vector&lt;int&gt; randoms;</div><div class="line">	/// 插入</div><div class="line">	//cout &lt;&lt; &quot;input root node value: &quot; &lt;&lt; endl;</div><div class="line">	int rootvalue = 50;</div><div class="line">	//cin &gt;&gt; rootvalue;</div><div class="line">	two_three_tree_node* root = new two_three_tree_node();</div><div class="line">	root-&gt;data_l = element(rootvalue);</div><div class="line"></div><div class="line">	/* 自行定制输入数字</div><div class="line">	int inputvalue = 0;</div><div class="line">	while (cout &lt;&lt; &quot;input node (-1 exit): &quot;, cin &gt;&gt; inputvalue,inputvalue != -1)</div><div class="line">	&#123;</div><div class="line">		randoms.push_back(inputvalue);</div><div class="line">	&#125;</div><div class="line">	*/</div><div class="line">	randoms = &#123; 33 ,85 ,68 ,80 ,62 ,15 ,97 ,10 &#125;;</div><div class="line"></div><div class="line">	insert_strategy* ins = new insert_strategy();</div><div class="line">	for (vector&lt;int&gt;::iterator itr = randoms.begin(); itr != randoms.end(); itr++)</div><div class="line">	&#123;</div><div class="line">		root = ins-&gt;insert(root, element(*itr));</div><div class="line">	&#125;</div><div class="line">	/// 查找</div><div class="line">	search_strategy* search = new search_strategy(root);</div><div class="line">	element search_item(12);</div><div class="line">	bool search_result = search-&gt;search(search_item);</div><div class="line"></div><div class="line">	/// 删除</div><div class="line">	int val;</div><div class="line">	while (cout&lt;&lt;&quot;input delete item: &quot;&lt;&lt;endl,cin&gt;&gt;val,val!=-1) &#123;</div><div class="line">		element be_deleted(val);</div><div class="line">		delete_strategy* delete_s = new delete_strategy(root, be_deleted);</div><div class="line">		delete_s-&gt;execute();</div><div class="line">	&#125;</div><div class="line">	return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>文章内容较长，到这里基本上算是把2-3树、2-3-4树、以及红黑树都捋了一遍。如果存在错误，麻烦帮忙指出（可以微博联系我）。</p>
</div></article></div></main><footer><div class="paginator"><a href="/2020/04/20/top2bottom_syntax_parser/" class="prev">PREV</a><a href="/2019/10/28/SyntaxParser_context_free_grammar/" class="next">NEXT</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'seansun';
var disqus_identifier = '2020/01/11/two_three_four_red_black_tree/';
var disqus_title = '简单了解2-3树、2-3-4树和红黑树';
var disqus_url = 'http://yoursite.com/2020/01/11/two_three_four_red_black_tree/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//seansun.disqus.com/count.js" async></script><div class="copyright"><p>关注微博<a href="http://weibo.com/wwloading" target="_blank">@凌云壮志幾多愁</a>，让我们有更多的联系。</p><p>© 2016 - 2020 <a href="http://yoursite.com">王望</a>, Powered By <a href="https://hexo.io/" target="_blank">Hexo</a></p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>